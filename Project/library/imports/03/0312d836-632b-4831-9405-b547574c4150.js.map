{"version":3,"sources":["..\\..\\..\\..\\..\\assets\\scripts\\Game/assets\\scripts\\Game\\InfinityWar.js"],"names":["cc","Class","extends","Component","properties","Player1","type","Node","default","Player2","SupplyPrefab","Prefab","PauseMenuPrefab","ShieldSupplyPrefab","EnemyPrefab","StaticEnemyPrefab","TrackEnemyPrefab","SpinEnemyPrefab","SwingEnemyPrefab","CopterEnemyPrefab","BatteryPrefab","BulletPrefab","MapVPrefab","MapHPrefab","Explode","AudioSource","TimeLabel","Label","pauseBtn","Button","MainCamera","Camera","Width","Height","borderSize","stateChange","getRandomPosition","maxX","randX","Math","random","maxY","randY","v2","generate","posX","posY","name","thing","instantiate","getComponent","Player","centerX","centerY","node","getChildByName","addChild","setPosition","onLoad","i","children","length","zIndex","sortAllChildren","on","pauseScene","time","scheduleOnce","initGame","schedule","updateTime","start","pause","string","SupplyHelp","EnemyAttack","StaticEnemyAttack","TrackEnemyAttack","SpinEnemyAttack","BatteryPowerUp","CopterEnemyAttack","SwingEnemyAttack","BatteryAdd","child","active","grandSon","group","exist","timeID","clearTimeout","undefined","setTimeout","bind","Menu","x","y","pos","speedX","speedY","dir","targetposX","targetposY","num","duration","targetPosX","targetPosY","swingDuration","posx","posy","Battery","shootNum","GameOver","end","sys","localStorage","setItem","String","result","JSON","parse","getItem","scores","push","Date","now","sort","a","b","score","stringify","zoomRatio","sceneName","director","_loadingScene","loadScene","update","dt","Dead"],"mappings":";;;;;;AAAA;;;AAGAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACRC,iBAAS;AACLC,kBAAMN,GAAGO,IADJ;AAELC,qBAAS;AAFJ,SADD;AAKRC,iBAAS;AACLH,kBAAMN,GAAGO,IADJ;AAELC,qBAAS;AAFJ,SALD;AASRE,sBAAc;AACVF,qBAAS,IADC;AAEVF,kBAAMN,GAAGW;AAFC,SATN;AAaRC,yBAAiB;AACbJ,qBAAS,IADI;AAEbF,kBAAMN,GAAGW;AAFI,SAbT;AAiBRE,4BAAoB;AAChBL,qBAAS,IADO;AAEhBF,kBAAMN,GAAGW;AAFO,SAjBZ;AAqBRG,qBAAa;AACTR,kBAAMN,GAAGW,MADA;AAETH,qBAAS;AAFA,SArBL;AAyBRO,2BAAmB;AACfT,kBAAMN,GAAGW,MADM;AAEfH,qBAAS;AAFM,SAzBX;AA6BRQ,0BAAkB;AACdV,kBAAMN,GAAGW,MADK;AAEdH,qBAAS;AAFK,SA7BV;AAiCRS,yBAAiB;AACbX,kBAAMN,GAAGW,MADI;AAEbH,qBAAS;AAFI,SAjCT;AAqCRU,0BAAkB;AACdZ,kBAAMN,GAAGW,MADK;AAEdH,qBAAS;AAFK,SArCV;AAyCRW,2BAAmB;AACfb,kBAAMN,GAAGW,MADM;AAEfH,qBAAS;AAFM,SAzCX;AA6CRY,uBAAe;AACXd,kBAAMN,GAAGW,MADE;AAEXH,qBAAS;AAFE,SA7CP;AAiDRa,sBAAc;AACVf,kBAAMN,GAAGW,MADC;AAEVH,qBAAS;AAFC,SAjDN;AAqDRc,oBAAY;AACRhB,kBAAMN,GAAGW,MADD;AAERH,qBAAS;AAFD,SArDJ;AAyDRe,oBAAY;AACRjB,kBAAMN,GAAGW,MADD;AAERH,qBAAS;AAFD,SAzDJ;AA6DRgB,iBAAQ;AACJlB,kBAAMN,GAAGyB,WADL;AAEJjB,qBAAS;AAFL,SA7DA;AAiERkB,mBAAU;AACNpB,kBAAMN,GAAG2B,KADH;AAENnB,qBAAS;AAFH,SAjEF;AAqERoB,kBAAU;AACNtB,kBAAMN,GAAG6B,MADH;AAENrB,qBAAS;AAFH,SArEF;AAyERsB,oBAAW;AACPxB,kBAAMN,GAAG+B,MADF;AAEPvB,qBAAS;AAFF,SAzEH;AA6ERwB,eAAO,IA7EC;AA8ERC,gBAAQ,IA9EA;AA+ERC,oBAAY,EA/EJ;AAgFRC,qBAAa;AAhFL,KAHP;;AAsFL;;;;AAIAC,qBA1FK,+BA0FgB;AACjB,YAAIC,OAAO,KAAKL,KAAL,GAAa,CAAb,GAAiB,KAAKE,UAAjC;AACA,YAAII,QAAQ,CAACC,KAAKC,MAAL,KAAgB,GAAjB,IAAwB,CAAxB,GAA4BH,IAAxC;AACA,YAAII,OAAO,KAAKR,MAAL,GAAc,CAAd,GAAkB,KAAKC,UAAlC;AACA,YAAIQ,QAAQ,CAACH,KAAKC,MAAL,KAAgB,GAAjB,IAAwB,CAAxB,GAA4BC,IAAxC;;AAEA,eAAOzC,GAAG2C,EAAH,CAAML,KAAN,EAAaI,KAAb,CAAP;AACH,KAjGI;;;AAmGL;;;;AAIAE,YAvGK,oBAuGKC,IAvGL,EAuGWC,IAvGX,EAuGiBC,IAvGjB,EAuGuB;AACxB,YAAIC,cAAJ;AACA,gBAAQD,IAAR;AACI,iBAAK,OAAL;AACIC,wBAAQhD,GAAGiD,WAAH,CAAe,KAAKnC,WAApB,CAAR;AACAkC,sBAAME,YAAN,CAAmB,OAAnB,EAA4B1B,OAA5B,GAAsC,KAAKA,OAA3C;AACA;AACJ,iBAAK,aAAL;AACIwB,wBAAQhD,GAAGiD,WAAH,CAAe,KAAKlC,iBAApB,CAAR;AACAiC,sBAAME,YAAN,CAAmB,aAAnB,EAAkC1B,OAAlC,GAA4C,KAAKA,OAAjD;AACA;AACJ,iBAAK,YAAL;AACIwB,wBAAQhD,GAAGiD,WAAH,CAAe,KAAKjC,gBAApB,CAAR;AACAgC,sBAAME,YAAN,CAAmB,YAAnB,EAAiC1B,OAAjC,GAA2C,KAAKA,OAAhD;AACAwB,sBAAME,YAAN,CAAmB,YAAnB,EAAiCC,MAAjC,GAA0CZ,KAAKC,MAAL,KAAgB,GAAhB,GAAsB,KAAKnC,OAA3B,GAAqC,KAAKI,OAApF;AACA;AACJ,iBAAK,WAAL;AACIuC,wBAAQhD,GAAGiD,WAAH,CAAe,KAAKhC,eAApB,CAAR;AACA+B,sBAAME,YAAN,CAAmB,WAAnB,EAAgC1B,OAAhC,GAA0C,KAAKA,OAA/C;AACAwB,sBAAME,YAAN,CAAmB,WAAnB,EAAgCE,OAAhC,GAA0CP,IAA1C;AACAG,sBAAME,YAAN,CAAmB,WAAnB,EAAgCG,OAAhC,GAA0CP,IAA1C;;AAEAE,sBAAME,YAAN,CAAmB,WAAnB,EAAgCC,MAAhC,GAAyCZ,KAAKC,MAAL,KAAgB,GAAhB,GAAsB,KAAKnC,OAA3B,GAAqC,KAAKI,OAAnF;AACA;AACJ,iBAAK,YAAL;AACIuC,wBAAQhD,GAAGiD,WAAH,CAAe,KAAK/B,gBAApB,CAAR;AACA8B,sBAAME,YAAN,CAAmB,YAAnB,EAAiC1B,OAAjC,GAA2C,KAAKA,OAAhD;AACA;AACJ,iBAAK,aAAL;AACIwB,wBAAQhD,GAAGiD,WAAH,CAAe,KAAK9B,iBAApB,CAAR;AACA6B,sBAAME,YAAN,CAAmB,aAAnB,EAAkC7B,YAAlC,GAAiD,KAAKA,YAAtD;AACA2B,sBAAME,YAAN,CAAmB,aAAnB,EAAkC1B,OAAlC,GAA4C,KAAKA,OAAjD;;AAEAwB,sBAAME,YAAN,CAAmB,WAAnB,EAAgCE,OAAhC,GAA0CP,IAA1C;AACAG,sBAAME,YAAN,CAAmB,WAAnB,EAAgCG,OAAhC,GAA0CP,IAA1C;;AAEAE,sBAAME,YAAN,CAAmB,aAAnB,EAAkCC,MAAlC,GAA2CZ,KAAKC,MAAL,KAAgB,GAAhB,GAAsB,KAAKnC,OAA3B,GAAqC,KAAKI,OAArF;AACA;AACJ,iBAAK,QAAL;AACIuC,wBAAQhD,GAAGiD,WAAH,CAAe,KAAKvC,YAApB,CAAR;AACA;AACJ,iBAAK,cAAL;AACIsC,wBAAQhD,GAAGiD,WAAH,CAAe,KAAKpC,kBAApB,CAAR;AACA;AACJ,iBAAK,SAAL;AACImC,wBAAQhD,GAAGiD,WAAH,CAAe,KAAK7B,aAApB,CAAR;AACA4B,sBAAME,YAAN,CAAmB,SAAnB,EAA8B7C,OAA9B,GAAwC,KAAKA,OAA7C;AACA2C,sBAAME,YAAN,CAAmB,SAAnB,EAA8BzC,OAA9B,GAAwC,KAAKA,OAA7C;AACAuC,sBAAME,YAAN,CAAmB,SAAnB,EAA8B7B,YAA9B,GAA6C,KAAKA,YAAlD;AACA;AA/CR;AAiDA,YAAI0B,QAAQ,SAAZ,EAAuB;AACnB,iBAAKO,IAAL,CAAUC,cAAV,CAAyB,KAAzB,EAAgCC,QAAhC,CAAyCR,KAAzC;AACH,SAFD,MAEO;AACH,iBAAKM,IAAL,CAAUC,cAAV,CAAyB,OAAzB,EAAkCC,QAAlC,CAA2CR,KAA3C;AACH;AACDA,cAAMS,WAAN,CAAkBZ,IAAlB,EAAwBC,IAAxB;AACA,eAAOE,KAAP;AACH,KAjKI;;;AAoKL;;;;AAIAU,UAxKK,oBAwKI;AACL;AACA,aAAK,IAAIC,IAAI,CAAb,EAAgBA,IAAI,KAAKL,IAAL,CAAUM,QAAV,CAAmBC,MAAvC,EAA+C,EAAEF,CAAjD,EAAoD;AAChD,oBAAQ,KAAKL,IAAL,CAAUM,QAAV,CAAmBD,CAAnB,EAAsBZ,IAA9B;AACI,qBAAK,SAAL;AAAgB;AACZ,6BAAKO,IAAL,CAAUM,QAAV,CAAmBD,CAAnB,EAAsBG,MAAtB,GAA+B,GAA/B;AACA;AACH;AACD,qBAAK,SAAL;AAAgB;AACZ,6BAAKR,IAAL,CAAUM,QAAV,CAAmBD,CAAnB,EAAsBG,MAAtB,GAA+B,GAA/B;AACA;AACH;AACD,qBAAK,WAAL;AACA,qBAAK,YAAL;AAAmB;AACf,6BAAKR,IAAL,CAAUM,QAAV,CAAmBD,CAAnB,EAAsBG,MAAtB,GAA+B,GAA/B;AACA;AACH;AACD,qBAAK,IAAL;AAAW;AACP,6BAAKR,IAAL,CAAUM,QAAV,CAAmBD,CAAnB,EAAsBG,MAAtB,GAA+B,CAAC,GAAhC;AACA;AACH;AAjBL;AAmBH;AACD,aAAKR,IAAL,CAAUS,eAAV;;AAEA;AACA,aAAKnC,QAAL,CAAc0B,IAAd,CAAmBU,EAAnB,CAAsB,OAAtB,EAA+B,KAAKC,UAApC,EAAgD,IAAhD;;AAGA,aAAKC,IAAL,GAAY,CAAZ;AACA,aAAKC,YAAL,CAAkB,KAAKC,QAAvB,EAAiC,CAAjC;AACA,aAAKC,QAAL,CAAc,KAAKC,UAAnB,EAA+B,CAA/B;AACH,KAxMI;AA0MLC,SA1MK,mBA0MG,CAEP,CA5MI;;;AA8ML;;;;AAIAD,cAlNK,wBAkNS;AACV,YAAI,KAAKE,KAAT,EAAgB;AACZ;AACH;AACD,aAAKN,IAAL,IAAa,CAAb;AACA,aAAKxC,SAAL,CAAe+C,MAAf,GAAwB,WAAW,KAAKP,IAAhB,GAAuB,GAA/C;AACH,KAxNI;;;AA0NL;;;;;AAKAE,YA/NK,sBA+NO;AAAA;;AACR,aAAKxB,QAAL,CAAc,CAAC,GAAf,EAAoB,GAApB,EAAyB,OAAzB;AACA,aAAKA,QAAL,CAAc,GAAd,EAAmB,GAAnB,EAAwB,OAAxB;AACA,aAAKA,QAAL,CAAc,GAAd,EAAmB,CAAC,GAApB,EAAyB,OAAzB;AACA,aAAKA,QAAL,CAAc,CAAC,GAAf,EAAoB,CAAC,GAArB,EAA0B,OAA1B;;AAEA,aAAKA,QAAL,CAAc,CAAd,EAAiB,CAAjB,EAAoB,QAApB;;AAEA,aAAK8B,UAAL,CAAgB,EAAhB;;AAEA,aAAKC,WAAL,CAAiB,CAAjB;;AAEA,aAAKR,YAAL,CAAkB,YAAM;AACpB,kBAAKS,iBAAL,CAAuB,EAAvB;AACH,SAFD,EAEG,CAFH;;AAIA,aAAKT,YAAL,CAAkB,YAAM;AACpB,kBAAKU,gBAAL,CAAsB,EAAtB;AACH,SAFD,EAEG,EAFH;;AAIA,aAAKV,YAAL,CAAkB,YAAM;AACpB,kBAAKW,eAAL,CAAqB,EAArB;AACH,SAFD,EAEG,EAFH;;AAIA,aAAKX,YAAL,CAAkB,YAAM;AACpB,kBAAKY,cAAL,CAAoB,CAApB,EAAuB,CAAvB,EAA0B,EAA1B;AACH,SAFD,EAEG,EAFH;;AAIA,aAAKZ,YAAL,CAAkB,YAAM;AACpB,kBAAKa,iBAAL,CAAuB,EAAvB;AACH,SAFD,EAEG,EAFH;;AAIA,aAAKb,YAAL,CAAkB,YAAM;AACpB,kBAAKc,gBAAL,CAAsB,GAAtB,EAA2B,IAA3B,EAAiC,CAAjC,EAAoC,EAApC,EAAyC,CAAzC;AACH,SAFD,EAEG,EAFH;;AAIA,aAAKd,YAAL,CAAkB,YAAM;AACpB,kBAAKc,gBAAL,CAAsB,GAAtB,EAA2B,CAA3B,EAA8B,IAA9B,EAAoC,EAApC,EAAyC,CAAzC;AACH,SAFD,EAEG,GAFH;;AAIA,aAAKd,YAAL,CAAkB,YAAM;AACpB,kBAAKe,UAAL,CAAgB,EAAhB;AACH,SAFD,EAEG,GAFH;;AAIA,aAAKf,YAAL,CAAkB,YAAM;AACpB,kBAAKc,gBAAL,CAAsB,GAAtB,EAA2B,IAA3B,EAAiC,IAAjC,EAAuC,EAAvC,EAA4C,CAA5C;AACH,SAFD,EAEG,GAFH;;AAIA,aAAKd,YAAL,CAAkB,YAAM;AACpB,kBAAKc,gBAAL,CAAsB,GAAtB,EAA2B,CAAC,IAA5B,EAAkC,IAAlC,EAAwC,EAAxC,EAA6C,CAA7C;AACH,SAFD,EAEG,GAFH;AAGH,KAlRI;;;AAoRL;;;;AAIAhB,cAxRK,wBAwRS;AACV;AADU;AAAA;AAAA;;AAAA;AAEV,iCAAkB,KAAKX,IAAL,CAAUM,QAA5B,8HAAsC;AAAA,oBAA7BuB,KAA6B;;AAClC;AACA,wBAAQA,MAAMpC,IAAd;AACI,yBAAK,OAAL;AACA,yBAAK,KAAL;AACA,yBAAK,SAAL;AACA,yBAAK,SAAL;AACA,yBAAK,MAAL;AACA,yBAAK,QAAL;AAAe;AACXoC,kCAAMC,MAAN,GAAe,KAAKZ,KAApB;AACH;AACD,yBAAK,IAAL;AAAW;AAAA;AAAA;AAAA;;AAAA;AACP,sDAAqBW,MAAMvB,QAA3B,mIAAqC;AAAA,wCAA5ByB,QAA4B;;AACjC,wCAAIA,SAASC,KAAT,IAAkB,QAAtB,EAAgC;AAC5BD,iDAASD,MAAT,GAAkB,KAAKZ,KAAvB;AACH,qCAFD,MAEO;AACH,4CAAI,CAAC,KAAKA,KAAV,EAAiB;AACba,qDAASE,KAAT,GAAiBF,SAASD,MAA1B;AACAC,qDAASD,MAAT,GAAkB,KAAlB;AACA,gDAAIC,SAASG,MAAb,EAAqB;AACjBC,6DAAaJ,SAASG,MAAtB;AACAH,yDAASG,MAAT,GAAkBE,SAAlB;AACH;AACJ,yCAPD,MAOO;AACHL,qDAASD,MAAT,GAAkBC,SAASE,KAA3B;AACAF,qDAASE,KAAT,GAAiB,KAAjB;AACA,gDAAIF,SAASD,MAAb,EAAqB;AACjB,oDAAIC,SAAStC,IAAT,IAAiB,YAArB,EAAmC;AAC/BsC,6DAASG,MAAT,GAAkBG,WAAW,YAAU;AACnC,6DAAKP,MAAL,GAAc,KAAd;AACH,qDAF4B,CAE3BQ,IAF2B,CAEtB,KAAKtC,IAAL,CAAUC,cAAV,CAAyB,IAAzB,EAA+BA,cAA/B,CAA8C,YAA9C,CAFsB,CAAX,EAEmD,IAFnD,CAAlB;AAGH,iDAJD,MAKK;AACD8B,6DAASG,MAAT,GAAkBG,WAAW,YAAU;AACnC,6DAAKP,MAAL,GAAc,KAAd;AACH,qDAF4B,CAE3BQ,IAF2B,CAEtB,KAAKtC,IAAL,CAAUC,cAAV,CAAyB,IAAzB,EAA+BA,cAA/B,CAA8C,aAA9C,CAFsB,CAAX,EAEoD,IAFpD,CAAlB;AAGH;AACJ;AACJ;AACJ;AACJ;AA7BM;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AA8BP;AACH;AAxCL;AA0CH;AA9CS;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AA+CV,aAAKiB,KAAL,GAAa,KAAKA,KAAL,GAAa,KAAb,GAAqB,IAAlC;AACA,YAAI,KAAKA,KAAT,EAAgB;AACZ,gBAAIqB,OAAO7F,GAAGiD,WAAH,CAAe,KAAKrC,eAApB,CAAX;AACAiF,iBAAKC,CAAL,GAAS,CAAT;AACAD,iBAAKE,CAAL,GAAS,CAAT;AACAF,iBAAKP,KAAL,GAAa,IAAb;AACA,iBAAKhC,IAAL,CAAUC,cAAV,CAAyB,IAAzB,EAA+B6B,MAA/B,GAAwC,IAAxC;AACA,iBAAK9B,IAAL,CAAUC,cAAV,CAAyB,IAAzB,EAA+BC,QAA/B,CAAwCqC,IAAxC;AACH;AACJ,KAhVI;;;AAkVL;;;;AAIAlB,eAtVK,uBAsVQT,IAtVR,EAsVc;AAAA;;AACf,aAAKG,QAAL,CAAc,YAAM;AAChB,iBAAK,IAAIV,IAAI,CAAb,EAAgBA,IAAI,CAApB,EAAuBA,GAAvB,EAA4B;AACxB,oBAAIqC,MAAM,OAAK5D,iBAAL,EAAV;AACA,oBAAIY,QAAQ,OAAKJ,QAAL,CAAcoD,IAAIF,CAAlB,EAAqBE,IAAID,CAAzB,EAA4B,OAA5B,EAAqC7C,YAArC,CAAkD,OAAlD,CAAZ;AACAF,sBAAMiD,MAAN,GAAe,OAAO1D,KAAKC,MAAL,KAAgB,GAAvB,CAAf;AACAQ,sBAAMkD,MAAN,GAAe,OAAO3D,KAAKC,MAAL,KAAgB,GAAvB,CAAf;AACH;AACJ,SAPD,EAOG0B,IAPH;AAQH,KA/VI;;;AAiWL;;;;AAIAU,qBArWK,6BAqWcV,IArWd,EAqWoB;AAAA;;AACrB,aAAKG,QAAL,CAAc,YAAM;AAChB,gBAAI2B,MAAM,OAAK5D,iBAAL,EAAV;AACA,mBAAKQ,QAAL,CAAcoD,IAAIF,CAAlB,EAAqBE,IAAID,CAAzB,EAA4B,aAA5B;AACH,SAHD,EAGG7B,IAHH;AAIH,KA1WI;;;AA4WL;;;;AAIAW,oBAhXK,4BAgXaX,IAhXb,EAgXmB;AAAA;;AACpB,aAAKG,QAAL,CAAc,YAAM;AAChB,iBAAK,IAAIV,IAAI,CAAb,EAAgBA,IAAI,CAApB,EAAuBA,GAAvB,EAA4B;AACxB,oBAAIqC,MAAM,OAAK5D,iBAAL,EAAV;AACA,uBAAKQ,QAAL,CAAcoD,IAAIF,CAAlB,EAAqBE,IAAID,CAAzB,EAA4B,YAA5B;AACH;AACJ,SALD,EAKG7B,IALH;AAMH,KAvXI;;;AAyXL;;;;AAIAY,mBA7XK,2BA6XYZ,IA7XZ,EA6XkB;AAAA;;AACnB,aAAKG,QAAL,CAAc,YAAM;AAChB,mBAAKzB,QAAL,CAAc,OAAKvC,OAAL,CAAayF,CAA3B,EAA8B,OAAKzF,OAAL,CAAa0F,CAA3C,EAA8C,WAA9C;AACA,mBAAKnD,QAAL,CAAc,OAAKnC,OAAL,CAAaqF,CAA3B,EAA8B,OAAKrF,OAAL,CAAasF,CAA3C,EAA8C,WAA9C;AACH,SAHD,EAGG7B,IAHH;AAIH,KAlYI;;;AAqYL;;;;AAIAc,qBAzYK,6BAyYcd,IAzYd,EAyYoB;AAAA;;AACrB,aAAKG,QAAL,CAAc,YAAM;AAChB,mBAAKzB,QAAL,CAAc,OAAKvC,OAAL,CAAayF,CAA3B,EAA8B,OAAKzF,OAAL,CAAa0F,CAA3C,EAA8C,aAA9C;AACA,mBAAKnD,QAAL,CAAc,OAAKnC,OAAL,CAAaqF,CAA3B,EAA8B,OAAKrF,OAAL,CAAasF,CAA3C,EAA8C,aAA9C;AACH,SAHD,EAGG7B,IAHH;AAIH,KA9YI;;;AAgZL;;;;AAIAe,oBApZK,4BAoZakB,GApZb,EAoZkBC,UApZlB,EAoZ8BC,UApZ9B,EAoZ0CC,GApZ1C,EAoZ+CC,QApZ/C,EAoZyD;AAAA;;AAC1D,aAAKpC,YAAL,CAAkB,YAAM;AACpB,iBAAK,IAAIR,IAAI,CAAC,IAAd,EAAoBA,IAAI,IAAxB,EAA8BA,KAAK,QAAQ2C,MAAO,CAAf,CAAnC,EAAsD;AAClD,oBAAItD,cAAJ;AACA,oBAAGmD,QAAQ,GAAX,EAAe;AACXnD,4BAAQ,OAAKJ,QAAL,CAAc,CAAC,IAAf,EAAqBe,CAArB,EAAwB,YAAxB,EAAsCT,YAAtC,CAAmD,YAAnD,CAAR;AACH,iBAFD,MAGK,IAAGiD,QAAQ,GAAX,EAAe;AAChBnD,4BAAQ,OAAKJ,QAAL,CAAce,CAAd,EAAiB,CAAC,IAAlB,EAAwB,YAAxB,EAAsCT,YAAtC,CAAmD,YAAnD,CAAR;AACH;;AAEDF,sBAAMwD,UAAN,GAAmBJ,UAAnB;AACApD,sBAAMyD,UAAN,GAAmBJ,UAAnB;AACArD,sBAAM0D,aAAN,GAAsBH,QAAtB;AACH;AACJ,SAdD,EAcG,CAdH;AAeH,KApaI;;;AAsaL;;;;AAIA7B,cA1aK,sBA0aOR,IA1aP,EA0aa;AAAA;;AACd,aAAKG,QAAL,CAAc,YAAM;AAChB,gBAAI2B,MAAM,OAAK5D,iBAAL,EAAV;AACA,gBAAIkE,MAAM/D,KAAKC,MAAL,EAAV;AACA,gBAAI8D,MAAM,GAAV,EAAe;AACX,uBAAK1D,QAAL,CAAcoD,IAAIF,CAAlB,EAAqBE,IAAID,CAAzB,EAA4B,cAA5B;AACH,aAFD,MAEO;AACH,uBAAKnD,QAAL,CAAcoD,IAAIF,CAAlB,EAAqBE,IAAID,CAAzB,EAA4B,QAA5B;AACH;AACJ,SARD,EAQG7B,IARH;AASH,KApbI;;;AAsbL;;;;AAIAgB,cA1bK,sBA0bOhB,IA1bP,EA0ba;AAAA;;AACd,aAAKC,YAAL,CAAkB,YAAM;AACpB,mBAAKvB,QAAL,CAAc,IAAd,EAAoB,IAApB,EAA0B,SAA1B;AACA,mBAAKuB,YAAL,CAAkB,YAAM;AACpB,uBAAKvB,QAAL,CAAc,IAAd,EAAoB,CAAC,IAArB,EAA2B,SAA3B;AACA,uBAAKuB,YAAL,CAAkB,YAAM;AACpB,2BAAKvB,QAAL,CAAc,CAAC,IAAf,EAAqB,CAAC,IAAtB,EAA4B,SAA5B;AACH,iBAFD,EAEGsB,IAFH;AAGH,aALD,EAKGA,IALH;AAMH,SARD,EAQGA,IARH;AASH,KApcI;;;AAscL;;;;AAIAa,kBA1cK,0BA0cW4B,IA1cX,EA0ciBC,IA1cjB,EA0cuB1C,IA1cvB,EA0c6B;AAAA;;AAC9B,aAAKC,YAAL,CAAkB,YAAM;AACpB,gBAAI0C,UAAU,QAAKjE,QAAL,CAAc+D,IAAd,EAAoBC,IAApB,EAA0B,SAA1B,EAAqC1D,YAArC,CAAkD,SAAlD,CAAd;AACA2D,oBAAQC,QAAR,GAAmB,CAAnB;AACA,oBAAK3C,YAAL,CAAkB,YAAM;AACpB0C,wBAAQC,QAAR,GAAmB,CAAnB;AACA,wBAAK3C,YAAL,CAAkB,YAAM;AACpB0C,4BAAQC,QAAR,GAAmB,CAAnB;AACA,4BAAK3C,YAAL,CAAkB,YAAM;AACpB0C,gCAAQC,QAAR,GAAmB,CAAnB;AACH,qBAFD,EAEG5C,IAFH;AAGH,iBALD,EAKGA,IALH;AAMH,aARD,EAQGA,IARH;AASH,SAZD,EAYGA,IAZH;AAaH,KAxdI;;;AA0dL;;;;AAIA6C,YA9dK,sBA8dO;AAAA;;AACR,aAAKC,GAAL,GAAW,IAAX;AACAhH,WAAGiH,GAAH,CAAOC,YAAP,CAAoBC,OAApB,CAA4B,cAA5B,EAA4CC,OAAO,KAAKlD,IAAZ,CAA5C;AACA,YAAImD,SAASC,KAAKC,KAAL,CAAWvH,GAAGiH,GAAH,CAAOC,YAAP,CAAoBM,OAApB,CAA4B,cAA5B,CAAX,CAAb;AACA,YAAIC,SAASzH,GAAGiH,GAAH,CAAOC,YAAP,CAAoBM,OAApB,CAA4B,SAA5B,CAAb;AACAC,iBAASH,KAAKC,KAAL,CAAWE,MAAX,CAAT;AACAA,eAAOC,IAAP,CAAY;AACJ,qBAAU,KAAKxD,IADX;AAEJ,oBAASyD,KAAKA,KAAKC,GAAL,EAAL;AAFL,SAAZ;AAIAH,eAAOI,IAAP,CAAY,UAASC,CAAT,EAAYC,CAAZ,EAAe;AACvB,mBAAOD,EAAEE,KAAF,GAAUD,EAAEC,KAAZ,GAAoB,CAAC,CAArB,GAAyB,CAAhC;AACH,SAFD;AAGAhI,WAAGiH,GAAH,CAAOC,YAAP,CAAoBC,OAApB,CAA4B,SAA5B,EAAuCG,KAAKW,SAAL,CAAeR,MAAf,CAAvC;AACA,YAAI,KAAKvD,IAAL,GAAYmD,MAAhB,EAAwB;AACpBrH,eAAGiH,GAAH,CAAOC,YAAP,CAAoBC,OAApB,CAA4B,cAA5B,EAA4C,KAAKjD,IAAjD;AACH;AACG,aAAKG,QAAL,CAAc,YAAM;AAChB,oBAAKvC,UAAL,CAAgBoG,SAAhB,IAA6B,KAA7B;AACH,SAFD,EAEG,IAFH;;AAIA,aAAK/D,YAAL,CAAkB,YAAI;AAClB,gBAAIgE,YAAYnI,GAAGoI,QAAH,CAAYC,aAA5B;AACA,gBAAIF,aAAa,gBAAjB,EAAmC;AAC/BnI,mBAAGoI,QAAH,CAAYE,SAAZ,CAAsB,gBAAtB;AACH;AACJ,SALD,EAKG,CALH;AAMP,KAzfI;;;AA2fL;AACAC,UA5fK,kBA4fEC,EA5fF,EA4fM;AACP,YAAI,KAAKrG,WAAL,IAAoB,CAAC,KAAK6E,GAA9B,EAAmC;AAC/B,iBAAK/C,UAAL;AACA,iBAAK9B,WAAL,GAAmB,KAAnB;AACH;;AAED,YAAI,KAAK9B,OAAL,CAAa6C,YAAb,CAA0B,QAA1B,EAAoCuF,IAApC,IAA4C,CAAC,KAAKzB,GAAtD,EAA2D;AACvD,iBAAKD,QAAL;AACA;AACH;AACD,YAAI,KAAKtG,OAAL,CAAayC,YAAb,CAA0B,QAA1B,EAAoCuF,IAApC,IAA4C,CAAC,KAAKzB,GAAtD,EAA2D;AACvD,iBAAKD,QAAL;AACA;AACH;AACJ;AA1gBI,CAAT","file":"InfinityWar.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\scripts\\Game","sourcesContent":["/*\n * 生存模式控制脚本\n */\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        Player1: {\n            type: cc.Node,\n            default: null,\n        },\n        Player2: {\n            type: cc.Node,\n            default: null,\n        },\n        SupplyPrefab: {\n            default: null,\n            type: cc.Prefab\n        },\n        PauseMenuPrefab: {\n            default: null,\n            type: cc.Prefab\n        },\n        ShieldSupplyPrefab: {\n            default: null,\n            type: cc.Prefab\n        },\n        EnemyPrefab: {\n            type: cc.Prefab,\n            default: null\n        },\n        StaticEnemyPrefab: {\n            type: cc.Prefab,\n            default: null\n        },\n        TrackEnemyPrefab: {\n            type: cc.Prefab,\n            default: null\n        },\n        SpinEnemyPrefab: {\n            type: cc.Prefab,\n            default: null\n        },\n        SwingEnemyPrefab: {\n            type: cc.Prefab,\n            default: null\n        },\n        CopterEnemyPrefab: {\n            type: cc.Prefab,\n            default: null\n        },\n        BatteryPrefab: {\n            type: cc.Prefab,\n            default: null\n        },\n        BulletPrefab: {\n            type: cc.Prefab,\n            default: null\n        },\n        MapVPrefab: {\n            type: cc.Prefab,\n            default: null\n        },\n        MapHPrefab: {\n            type: cc.Prefab,\n            default: null\n        },\n        Explode:{\n            type: cc.AudioSource,\n            default: null\n        },\n        TimeLabel:{\n            type: cc.Label, \n            default: null\n        },\n        pauseBtn: {\n            type: cc.Button,\n            default: null\n        },\n        MainCamera:{\n            type: cc.Camera,\n            default: null\n        },\n        Width: 2500,\n        Height: 2500,\n        borderSize: 45,\n        stateChange: false,\n    },\n\n    /*\n     * 获取随机位置函数\n     * 功能：获取一个随机的位置\n     */\n    getRandomPosition () {\n        var maxX = this.Width / 2 - this.borderSize;\n        var randX = (Math.random() - 0.5) * 2 * maxX\n        var maxY = this.Height / 2 - this.borderSize\n        var randY = (Math.random() - 0.5) * 2 * maxY\n\n        return cc.v2(randX, randY)\n    },\n\n    /*\n     * 生成函数\n     * 功能：根据参数生成一个对象，是敌人或者补给或者其他\n     */\n    generate (posX, posY, name) {\n        let thing\n        switch (name) {\n            case 'enemy':\n                thing = cc.instantiate(this.EnemyPrefab)\n                thing.getComponent('Enemy').Explode = this.Explode\n                break\n            case 'staticEnemy':\n                thing = cc.instantiate(this.StaticEnemyPrefab)\n                thing.getComponent('EnemyStatic').Explode = this.Explode\n                break\n            case 'trackEnemy':\n                thing = cc.instantiate(this.TrackEnemyPrefab)\n                thing.getComponent('EnemyTrack').Explode = this.Explode\n                thing.getComponent('EnemyTrack').Player = Math.random() < 0.5 ? this.Player1 : this.Player2\n                break\n            case 'spinEnemy':\n                thing = cc.instantiate(this.SpinEnemyPrefab)\n                thing.getComponent('EnemySpin').Explode = this.Explode\n                thing.getComponent('EnemySpin').centerX = posX\n                thing.getComponent('EnemySpin').centerY = posY\n\n                thing.getComponent('EnemySpin').Player = Math.random() < 0.5 ? this.Player1 : this.Player2\n                break\n            case 'swingEnemy':\n                thing = cc.instantiate(this.SwingEnemyPrefab)\n                thing.getComponent('EnemySwing').Explode = this.Explode\n                break\n            case 'copterEnemy':\n                thing = cc.instantiate(this.CopterEnemyPrefab);\n                thing.getComponent('EnemyCopter').BulletPrefab = this.BulletPrefab\n                thing.getComponent('EnemyCopter').Explode = this.Explode\n\n                thing.getComponent('EnemySpin').centerX = posX\n                thing.getComponent('EnemySpin').centerY = posY\n\n                thing.getComponent('EnemyCopter').Player = Math.random() < 0.5 ? this.Player1 : this.Player2\n                break\n            case 'supply':\n                thing = cc.instantiate(this.SupplyPrefab)\n                break\n            case 'shieldSupply':\n                thing = cc.instantiate(this.ShieldSupplyPrefab)\n                break\n            case 'battery':\n                thing = cc.instantiate(this.BatteryPrefab)\n                thing.getComponent('Battery').Player1 = this.Player1\n                thing.getComponent('Battery').Player2 = this.Player2\n                thing.getComponent('Battery').BulletPrefab = this.BulletPrefab\n                break\n        }\n        if (name == 'battery') {\n            this.node.getChildByName('Map').addChild(thing)\n        } else {\n            this.node.getChildByName('Enemy').addChild(thing)\n        }\n        thing.setPosition(posX, posY)\n        return thing\n    },\n\n\n    /*\n     * 初始化函数\n     * 功能：初始化脚本所需的设定\n     */\n    onLoad() {\n        // 设置对象的zIndex，保证显示层级的正确\n        for (var i = 0; i < this.node.children.length; ++i) {\n            switch (this.node.children[i].name) {\n                case 'player1': {\n                    this.node.children[i].zIndex = 100;\n                    break;\n                }\n                case 'player2': {\n                    this.node.children[i].zIndex = 100;\n                    break;\n                }\n                case 'stickLeft':\n                case 'stickRight': {\n                    this.node.children[i].zIndex = 101;\n                    break;\n                }\n                case 'bg': {\n                    this.node.children[i].zIndex = -100;\n                    break;\n                }\n            }\n        }\n        this.node.sortAllChildren()\n        \n        // 绑定暂停按键的回调函数\n        this.pauseBtn.node.on('click', this.pauseScene, this)\n\n        \n        this.time = 0\n        this.scheduleOnce(this.initGame, 0)\n        this.schedule(this.updateTime, 1)\n    },\n\n    start() {\n        \n    },\n\n    /*\n     * 计时函数\n     * 功能：计算玩家生存的时间，并将其更新到分数栏上\n     */\n    updateTime () {\n        if (this.pause) {\n            return\n        }\n        this.time += 1\n        this.TimeLabel.string = 'Time: ' + this.time + 's'\n    },\n\n    /*\n     * 初始化游戏场景函数\n     * 功能：初始化游戏场景，生成一些敌人，\n     *      并且设置定时生成敌人的时间\n     */\n    initGame () {\n        this.generate(-500, 500, 'enemy')\n        this.generate(500, 500, 'enemy')\n        this.generate(500, -500, 'enemy')\n        this.generate(-500, -500, 'enemy')\n\n        this.generate(0, 0, 'supply')\n\n        this.SupplyHelp(20)\n\n        this.EnemyAttack(8)\n\n        this.scheduleOnce(() => {\n            this.StaticEnemyAttack(20)\n        }, 2)\n\n        this.scheduleOnce(() => {\n            this.TrackEnemyAttack(12)\n        }, 10)\n        \n        this.scheduleOnce(() => {\n            this.SpinEnemyAttack(13)\n        }, 20)\n\n        this.scheduleOnce(() => {\n            this.BatteryPowerUp(0, 0, 30)\n        }, 45)\n\n        this.scheduleOnce(() => {\n            this.CopterEnemyAttack(15)\n        }, 60)\n\n        this.scheduleOnce(() => {\n            this.SwingEnemyAttack('x', 2200, 0, 10 , 6)\n        }, 80)\n\n        this.scheduleOnce(() => {\n            this.SwingEnemyAttack('y', 0, 2200 ,10 , 6)\n        }, 100)\n\n        this.scheduleOnce(() => {\n            this.BatteryAdd(60)\n        }, 120)\n\n        this.scheduleOnce(() => {\n            this.SwingEnemyAttack('x', 1100, 1100 ,20 , 6)\n        }, 300)\n\n        this.scheduleOnce(() => {\n            this.SwingEnemyAttack('y', -1100, 1100 ,20 , 6)\n        }, 330)\n    },\n\n    /*\n     * 暂停场景函数\n     * 功能：暂停/恢复场景内容\n     */\n    pauseScene () {\n        // 此函数与Game.js相同，可参考Game.js中的pauseScene函数\n        for (var child of this.node.children) {\n            debugger;\n            switch (child.name) {\n                case 'Enemy':\n                case 'Map':\n                case 'player1':\n                case 'player2':\n                case 'bind':\n                case 'target': {\n                    child.active = this.pause\n                }\n                case 'UI': {\n                    for (var grandSon of child.children) {\n                        if (grandSon.group != 'Shield') {\n                            grandSon.active = this.pause\n                        } else {\n                            if (!this.pause) {\n                                grandSon.exist = grandSon.active\n                                grandSon.active = false\n                                if (grandSon.timeID) {\n                                    clearTimeout(grandSon.timeID)\n                                    grandSon.timeID = undefined\n                                }\n                            } else {\n                                grandSon.active = grandSon.exist\n                                grandSon.exist = false\n                                if (grandSon.active) {\n                                    if (grandSon.name == 'shieldLeft') {\n                                        grandSon.timeID = setTimeout(function(){\n                                            this.active = false\n                                        }.bind(this.node.getChildByName('UI').getChildByName('shieldLeft')), 2500)\n                                    }\n                                    else {\n                                        grandSon.timeID = setTimeout(function(){\n                                            this.active = false\n                                        }.bind(this.node.getChildByName('UI').getChildByName('shieldRight')), 2500)\n                                    }\n                                }\n                            }\n                        }\n                    }\n                    break\n                }\n            }\n        }\n        this.pause = this.pause ? false : true\n        if (this.pause) {\n            var Menu = cc.instantiate(this.PauseMenuPrefab)\n            Menu.x = 0\n            Menu.y = 0\n            Menu.group = 'UI'\n            this.node.getChildByName('UI').active = true\n            this.node.getChildByName(\"UI\").addChild(Menu)\n        }\n    },\n\n    /*\n     * 定时生成enemy\n     * 功能：根据给定的时间间隔，生成2个普通的enemy\n     */\n    EnemyAttack (time) {\n        this.schedule(() => {\n            for (let i = 0; i < 2; i++) {\n                let pos = this.getRandomPosition()\n                let thing = this.generate(pos.x, pos.y, 'enemy').getComponent('Enemy')\n                thing.speedX = 400 * (Math.random() - 0.5)\n                thing.speedY = 400 * (Math.random() - 0.5)\n            }\n        }, time)\n    },\n\n    /*\n     * 生成静态敌人函数\n     * 功能：根据给定的时间间隔，生成静态敌人\n     */\n    StaticEnemyAttack (time) {\n        this.schedule(() => {\n            let pos = this.getRandomPosition()\n            this.generate(pos.x, pos.y, 'staticEnemy')\n        }, time)\n    },\n\n    /*\n     * 生成追踪敌人函数\n     * 功能：根据给定的时间间隔，生成追踪型敌人\n     */\n    TrackEnemyAttack (time) {\n        this.schedule(() => {\n            for (let i = 0; i < 2; i++) {\n                let pos = this.getRandomPosition()\n                this.generate(pos.x, pos.y, 'trackEnemy')\n            }\n        }, time)\n    },\n\n    /*\n     * 生成旋转敌人函数\n     * 功能：根据给定的时间间隔，生成旋转型敌人\n     */\n    SpinEnemyAttack (time) {\n        this.schedule(() => {\n            this.generate(this.Player1.x, this.Player1.y, 'spinEnemy')\n            this.generate(this.Player2.x, this.Player2.y, 'spinEnemy')\n        }, time)\n    },\n\n\n    /*\n     * 直升机敌人生成函数\n     * 功能：根据给定的时间间隔，生成直升机敌人\n     */\n    CopterEnemyAttack (time) {\n        this.schedule(() => {\n            this.generate(this.Player1.x, this.Player1.y, 'copterEnemy')\n            this.generate(this.Player2.x, this.Player2.y, 'copterEnemy')\n        }, time)\n    },\n\n    /*\n     * 生成往返敌人函数\n     * 功能：根据给定的参数和时间间隔，生成往返敌人\n     */\n    SwingEnemyAttack (dir, targetposX, targetposY, num, duration) {\n        this.scheduleOnce(() => {\n            for (let i = -1100; i < 1100; i += 2200 / (num  - 1)) {\n                let thing\n                if(dir === 'x'){\n                    thing = this.generate(-1100, i, 'swingEnemy').getComponent('EnemySwing')\n                }\n                else if(dir === 'y'){\n                    thing = this.generate(i, -1100, 'swingEnemy').getComponent('EnemySwing')\n                }\n                \n                thing.targetPosX = targetposX\n                thing.targetPosY = targetposY\n                thing.swingDuration = duration\n            }\n        }, 0)\n    },\n\n    /*\n     * 生成补集函数\n     * 功能：根据给定的时间间隔产生补集\n     */\n    SupplyHelp (time) {\n        this.schedule(() => {\n            let pos = this.getRandomPosition()\n            let num = Math.random()\n            if (num > 0.5) {\n                this.generate(pos.x, pos.y, 'shieldSupply')\n            } else {\n                this.generate(pos.x, pos.y, 'supply')\n            }\n        }, time)\n    },\n\n    /*\n     * 生成炮台函数\n     * 功能：根据给定的时间间隔，生成炮台\n     */\n    BatteryAdd (time) {\n        this.scheduleOnce(() => {\n            this.generate(1100, 1100, 'battery')\n            this.scheduleOnce(() => {\n                this.generate(1100, -1100, 'battery')\n                this.scheduleOnce(() => {\n                    this.generate(-1100, -1100, 'battery')\n                }, time)\n            }, time)\n        }, time)\n    },\n\n    /*\n     * 炮台死亡函数\n     * 功能：计时炮台寿命，当炮台寿命到期后则销毁\n     */\n    BatteryPowerUp (posx, posy, time) {\n        this.scheduleOnce(() => {\n            var Battery = this.generate(posx, posy, 'battery').getComponent('Battery')\n            Battery.shootNum = 1\n            this.scheduleOnce(() => {\n                Battery.shootNum = 2\n                this.scheduleOnce(() => {\n                    Battery.shootNum = 3\n                    this.scheduleOnce(() => {\n                        Battery.shootNum = 4\n                    }, time)\n                }, time)\n            }, time)\n        }, time)\n    },\n\n    /*\n     * 游戏结束函数\n     * 功能：向本地储存中写入游戏结果，并准备加载下一场景\n     */\n    GameOver () {\n        this.end = true\n        cc.sys.localStorage.setItem('SurviveScore', String(this.time))\n        var result = JSON.parse(cc.sys.localStorage.getItem('highestScore'))\n        var scores = cc.sys.localStorage.getItem('ranking')\n        scores = JSON.parse(scores)\n        scores.push({\n                'score' : this.time,\n                'time' : Date(Date.now())\n        })\n        scores.sort(function(a, b) {\n            return a.score > b.score ? -1 : 1\n        })\n        cc.sys.localStorage.setItem('ranking', JSON.stringify(scores))\n        if (this.time > result) {\n            cc.sys.localStorage.setItem('highestScore', this.time)\n        }\n            this.schedule(() => {\n                this.MainCamera.zoomRatio -= 0.003\n            }, 0.01)\n            \n            this.scheduleOnce(()=>{\n                var sceneName = cc.director._loadingScene\n                if (sceneName != 'Transition_INF') {\n                    cc.director.loadScene(\"Transition_INF\")\n                }\n            }, 2) \n    },\n\n    // 系统调用的更新函数，与Game.js中的更新函数相同\n    update(dt) {\n        if (this.stateChange && !this.end) {\n            this.pauseScene()\n            this.stateChange = false\n        }\n\n        if (this.Player1.getComponent('Player').Dead && !this.end) {\n            this.GameOver()\n            return\n        }\n        if (this.Player2.getComponent('Player').Dead && !this.end) {\n            this.GameOver()\n            return\n        }\n    },\n});"]}