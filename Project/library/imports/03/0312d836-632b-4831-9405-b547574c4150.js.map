{"version":3,"sources":["..\\..\\..\\..\\..\\assets\\scripts\\Game/assets\\scripts\\Game\\InfinityWar.js"],"names":["cc","Class","extends","Component","properties","Player1","type","Node","default","Player2","SupplyPrefab","Prefab","PauseMenuPrefab","ShieldSupplyPrefab","EnemyPrefab","StaticEnemyPrefab","TrackEnemyPrefab","SpinEnemyPrefab","SwingEnemyPrefab","CopterEnemyPrefab","BatteryPrefab","BulletPrefab","MapVPrefab","MapHPrefab","Explode1","AudioSource","Explode2","Explode3","pauseBtn","Button","Width","Height","borderSize","stateChange","getRandomPosition","maxX","randX","Math","random","maxY","randY","v2","generate","posX","posY","name","thing","instantiate","getComponent","Explode","Player","centerX","centerY","node","getChildByName","addChild","setPosition","onLoad","i","children","length","zIndex","sortAllChildren","on","pauseScene","start","scheduleOnce","initGame","child","active","pause","grandSon","exist","timeID","clearTimeout","setTimeout","Menu","x","y","group","SupplyHelp","EnemyAttack","StaticEnemyAttack","TrackEnemyAttack","SpinEnemyAttack","BatteryPowerUp","CopterEnemyAttack","SwingEnemyAttack","BatteryAdd","time","schedule","pos","speedX","speedY","dir","targetposX","targetposY","num","duration","targetPosX","targetPosY","swingDuration","posx","posy","Battery","shootNum","update","dt"],"mappings":"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","file":"InfinityWar.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\scripts\\Game","sourcesContent":["// Learn cc.Class:\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/class.html\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/class.html\n// Learn Attribute:\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\n//  - [English] https://www.cocos2d-x.org/docs/creator/manual/en/scripting/life-cycle-callbacks.html\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        Player1: {\n            type: cc.Node,\n            default: null,\n        },\n        Player2: {\n            type: cc.Node,\n            default: null,\n        },\n        SupplyPrefab: {\n            default: null,\n            type: cc.Prefab\n        },\n        PauseMenuPrefab: {\n            default: null,\n            type: cc.Prefab\n        },\n        ShieldSupplyPrefab: {\n            default: null,\n            type: cc.Prefab\n        },\n        EnemyPrefab: {\n            type: cc.Prefab,\n            default: null\n        },\n        StaticEnemyPrefab: {\n            type: cc.Prefab,\n            default: null\n        },\n        TrackEnemyPrefab: {\n            type: cc.Prefab,\n            default: null\n        },\n        SpinEnemyPrefab: {\n            type: cc.Prefab,\n            default: null\n        },\n        SwingEnemyPrefab: {\n            type: cc.Prefab,\n            default: null\n        },\n        CopterEnemyPrefab: {\n            type: cc.Prefab,\n            default: null\n        },\n        BatteryPrefab: {\n            type: cc.Prefab,\n            default: null\n        },\n        BulletPrefab: {\n            type: cc.Prefab,\n            default: null\n        },\n        MapVPrefab: {\n            type: cc.Prefab,\n            default: null\n        },\n        MapHPrefab: {\n            type: cc.Prefab,\n            default: null\n        },\n        Explode1: {\n            type: cc.AudioSource,\n            default: null\n        },\n        Explode2: {\n            type: cc.AudioSource,\n            default: null\n        },\n        Explode3: {\n            type: cc.AudioSource,\n            default: null\n        },\n        pauseBtn: {\n            type: cc.Button,\n            default: null\n        },\n        Width: 2500,\n        Height: 2500,\n        borderSize: 35,\n        stateChange: false\n    },\n\n    // TODO 避免重叠\n    // LIFE-CYCLE CALLBACKS:\n    getRandomPosition: function () {\n        var maxX = this.Width / 2 - this.borderSize;\n        var randX = (Math.random() - 0.5) * 2 * maxX\n        var maxY = this.Height / 2 - this.borderSize\n        var randY = (Math.random() - 0.5) * 2 * maxY\n\n        return cc.v2(randX, randY)\n    },\n\n    generate: function (posX, posY, name) {\n        let thing\n        switch (name) {\n            case 'enemy':\n                thing = cc.instantiate(this.EnemyPrefab)\n                thing.getComponent('Enemy').Explode = this.Explode1\n                break\n            case 'staticEnemy':\n                thing = cc.instantiate(this.StaticEnemyPrefab)\n                thing.getComponent('EnemyStatic').Explode = this.Explode3\n                break\n            case 'trackEnemy':\n                thing = cc.instantiate(this.TrackEnemyPrefab)\n                thing.getComponent('EnemyTrack').Explode = this.Explode1\n                thing.getComponent('EnemyTrack').Player = Math.random() < 0.5 ? this.Player1 : this.Player2\n                break\n            case 'spinEnemy':\n                thing = cc.instantiate(this.SpinEnemyPrefab)\n                thing.getComponent('EnemySpin').Explode = this.Explode2\n                thing.getComponent('EnemySpin').centerX = posX\n                thing.getComponent('EnemySpin').centerY = posY\n\n                thing.getComponent('EnemySpin').Player = Math.random() < 0.5 ? this.Player1 : this.Player2\n                break\n            case 'swingEnemy':\n                thing = cc.instantiate(this.SwingEnemyPrefab)\n                thing.getComponent('EnemySwing').Explode = this.Explode1\n                break\n            case 'copterEnemy':\n                thing = cc.instantiate(this.CopterEnemyPrefab);\n                thing.getComponent('EnemyCopter').BulletPrefab = this.BulletPrefab\n                thing.getComponent('EnemyCopter').Explode = this.Explode2\n\n                thing.getComponent('EnemySpin').centerX = posX\n                thing.getComponent('EnemySpin').centerY = posY\n\n                thing.getComponent('EnemyCopter').Player = Math.random() < 0.5 ? this.Player1 : this.Player2\n                break\n            case 'supply':\n                thing = cc.instantiate(this.SupplyPrefab)\n                break\n            case 'shieldSupply':\n                thing = cc.instantiate(this.ShieldSupplyPrefab)\n                break\n            case 'battery':\n                thing = cc.instantiate(this.BatteryPrefab)\n                thing.getComponent('Battery').Player1 = this.Player1\n                thing.getComponent('Battery').Player2 = this.Player2\n                thing.getComponent('Battery').BulletPrefab = this.BulletPrefab\n                break\n        }\n        if (name == 'battery') {\n            this.node.getChildByName('Map').addChild(thing)\n        } else {\n            this.node.getChildByName('Enemy').addChild(thing)\n        }\n        thing.setPosition(posX, posY)\n        return thing\n    },\n\n\n    onLoad() {\n        for (var i = 0; i < this.node.children.length; ++i) {\n            switch (this.node.children[i].name) {\n                case 'player1': {\n                    this.node.children[i].zIndex = 100;\n                    break;\n                }\n                case 'player2': {\n                    this.node.children[i].zIndex = 100;\n                    break;\n                }\n                case 'stickLeft':\n                case 'stickRight': {\n                    this.node.children[i].zIndex = 101;\n                    break;\n                }\n                case 'bg': {\n                    this.node.children[i].zIndex = -100;\n                    break;\n                }\n            }\n        }\n        this.node.sortAllChildren();\n        this.pauseBtn.node.on('click', this.pauseScene, this)\n    },\n\n    start() {\n        this.scheduleOnce(this.initGame, 0);\n        // this.generateMap()\n    },\n\n    pauseScene () {\n        for (var child of this.node.children) {\n            switch (child.name) {\n                case 'Enemy':\n                case 'Map':\n                case 'player1':\n                case 'player2':\n                case 'bind':\n                case 'target': {\n                    child.active = this.pause\n                }\n                case 'UI': {\n                    for (var grandSon of child.children) {\n                        if (grandSon.name != 'shield') {\n                            grandSon.active = this.pause\n                        } else {\n                            debugger;\n                            if (!this.pause) {\n                                grandSon.exist = grandSon.active\n                                grandSon.active = false\n                                if (grandSon.timeID) {\n                                    clearTimeout(grandSon.timeID)\n                                }\n                            } else {\n                                grandSon.active = grandSon.exist\n                                grandSon.exist = false\n                                if (grandSon.active) {\n                                    grandSon.timeID = setTimeout(child=>{\n                                            grandSon.active = false\n                                    }, 2500)\n                                }\n                            }\n                        }\n                    }\n                    break\n                }\n            }\n        }\n        this.pause = this.pause ? false : true\n        if (this.pause) {\n            var Menu = cc.instantiate(this.PauseMenuPrefab)\n            Menu.x = 0\n            Menu.y = 0\n            Menu.group = 'UI'\n            this.node.getChildByName('UI').active = true\n            this.node.getChildByName(\"UI\").addChild(Menu)\n        }\n    },\n\n    initGame: function () {\n        this.generate(-500, 500, 'enemy')\n        this.generate(500, 500, 'enemy')\n        this.generate(500, -500, 'enemy')\n        this.generate(-500, -500, 'enemy')\n\n        this.generate(0, 0, 'supply')\n\n        this.SupplyHelp(20)\n\n        this.EnemyAttack(8)\n\n        this.scheduleOnce(() => {\n            this.StaticEnemyAttack(15)\n        }, 2)\n\n        this.scheduleOnce(() => {\n            this.TrackEnemyAttack(9)\n        }, 15)\n        \n        this.scheduleOnce(() => {\n            this.SpinEnemyAttack(13)\n        }, 32)\n\n        this.scheduleOnce(() => {\n            this.BatteryPowerUp(0, 0, 30)\n        }, 60)\n\n        this.scheduleOnce(() => {\n            this.CopterEnemyAttack(15)\n        }, 70)\n\n        this.scheduleOnce(() => {\n            this.SwingEnemyAttack('x', 2200, 0, 10 , 6)\n        }, 120)\n\n        this.scheduleOnce(() => {\n            this.SwingEnemyAttack('y', 0, 2200 ,10 , 6)\n        }, 180)\n\n        this.scheduleOnce(() => {\n            this.BatteryAdd(60)\n        }, 150)\n\n        this.scheduleOnce(() => {\n            this.SwingEnemyAttack('x', 1100, 1100 ,20 , 6)\n        }, 600)\n\n        this.scheduleOnce(() => {\n            this.SwingEnemyAttack('y', -1100, 1100 ,20 , 6)\n        }, 630)\n    },\n\n    EnemyAttack: function (time) {\n        this.schedule(() => {\n            for (let i = 0; i < 3; i++) {\n                let pos = this.getRandomPosition()\n                let thing = this.generate(pos.x, pos.y, 'enemy').getComponent('Enemy')\n                thing.speedX = 400 * (Math.random() - 0.5)\n                thing.speedY = 400 * (Math.random() - 0.5)\n            }\n        }, time)\n    },\n\n    StaticEnemyAttack: function (time) {\n        this.schedule(() => {\n            let pos = this.getRandomPosition()\n            this.generate(pos.x, pos.y, 'staticEnemy')\n        }, time)\n    },\n\n    TrackEnemyAttack: function (time) {\n        this.schedule(() => {\n            for (let i = 0; i < 3; i++) {\n                let pos = this.getRandomPosition()\n                this.generate(pos.x, pos.y, 'trackEnemy')\n            }\n        }, time)\n    },\n\n    SpinEnemyAttack: function (time) {\n        this.schedule(() => {\n            this.generate(this.Player1.x, this.Player1.y, 'spinEnemy')\n            this.generate(this.Player2.x, this.Player2.y, 'spinEnemy')\n        }, time)\n    },\n\n    CopterEnemyAttack: function (time) {\n        this.schedule(() => {\n            this.generate(this.Player1.x, this.Player1.y, 'copterEnemy')\n            this.generate(this.Player2.x, this.Player2.y, 'copterEnemy')\n        }, time)\n    },\n\n    SwingEnemyAttack(dir, targetposX, targetposY, num, duration){\n        this.scheduleOnce(() => {\n            for (let i = -1100; i < 1100; i += 2200 / (num  - 1)) {\n                let thing\n                if(dir === 'x'){\n                    thing = this.generate(-1100, i, 'swingEnemy').getComponent('EnemySwing')\n                }\n                else if(dir === 'y'){\n                    thing = this.generate(i, -1100, 'swingEnemy').getComponent('EnemySwing')\n                }\n                \n                thing.targetPosX = targetposX\n                thing.targetPosY = targetposY\n                thing.swingDuration = duration\n            }\n        }, 0)\n    },\n\n    SupplyHelp: function (time) {\n        this.schedule(() => {\n            let pos = this.getRandomPosition()\n            let num = Math.random()\n            if (num > 0.5) {\n                this.generate(pos.x, pos.y, 'shieldSupply')\n            } else {\n                this.generate(pos.x, pos.y, 'supply')\n            }\n        }, time)\n    },\n\n    BatteryAdd: function (time) {\n        this.scheduleOnce(() => {\n            this.generate(1100, 1100, 'battery')\n            this.scheduleOnce(() => {\n                this.generate(1100, -1100, 'battery')\n                this.scheduleOnce(() => {\n                    this.generate(-1100, -1100, 'battery')\n                }, time)\n            }, time)\n        }, time)\n    },\n\n    BatteryPowerUp: function (posx, posy, time) {\n        this.scheduleOnce(() => {\n            var Battery = this.generate(posx, posy, 'battery').getComponent('Battery')\n            Battery.shootNum = 1\n            this.scheduleOnce(() => {\n                Battery.shootNum = 2\n                this.scheduleOnce(() => {\n                    Battery.shootNum = 3\n                    this.scheduleOnce(() => {\n                        Battery.shootNum = 4\n                    }, time)\n                }, time)\n            }, time)\n        }, time)\n    },\n\n    update(dt) {\n        if (this.stateChange) {\n            this.pauseScene()\n            this.stateChange = false\n        }\n    },\n});"]}