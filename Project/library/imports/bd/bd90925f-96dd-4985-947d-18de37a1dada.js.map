{"version":3,"sources":["..\\..\\..\\..\\..\\assets\\scripts\\Game/assets\\scripts\\Game\\EnemyStatic.js"],"names":["cc","Class","extends","require","properties","shootNum","BulletPrefab","type","Prefab","default","bulletSpeed","onLoad","director","getCollisionManager","enabled","onCollisionEnter","other","self","node","group","i","newBullet","instantiate","bulletSetting","getComponent","rotation","x","y","direction","v2","Math","cos","PI","sin","speed","parent","addChild","Explode","play","blast","BlastPrefab","setPosition","animComponent","Animation","destroy","sortAllChildren","start","update","dt","rotate"],"mappings":";;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEAA,GAAGC,KAAH,CAAS;AACLC,aAASC,QAAQ,OAAR,CADJ;;AAGLC,gBAAY;AACRC,kBAAU,CADF;AAERC,sBAAc;AACVC,kBAAMP,GAAGQ,MADC;AAEVC,qBAAS;AAFC,SAFN;AAMRC,qBAAa;AANL,KAHP;;AAYL;;AAEAC,UAdK,oBAcI;AACLX,WAAGY,QAAH,CAAYC,mBAAZ,GAAkCC,OAAlC,GAA4C,IAA5C;AACH,KAhBI;AAkBLC,oBAlBK,4BAkBYC,KAlBZ,EAkBmBC,IAlBnB,EAkByB;AAC1B,YAAID,MAAME,IAAN,CAAWC,KAAX,IAAoB,MAAxB,EAAgC;;AAE5B,iBAAK,IAAIC,IAAI,CAAb,EAAgBA,IAAI,GAApB,EAAyBA,KAAK,MAAM,KAAKf,QAAzC,EAAmD;AAC/C;AACA,oBAAIgB,YAAYrB,GAAGsB,WAAH,CAAe,KAAKhB,YAApB,CAAhB;AACA,oBAAIiB,gBAAgBF,UAAUG,YAAV,CAAuB,QAAvB,CAApB;;AAEAH,0BAAUI,QAAV,GAAqB,KAAKL,CAA1B;;AAEAC,0BAAUK,CAAV,GAAc,KAAKR,IAAL,CAAUQ,CAAxB;AACAL,0BAAUM,CAAV,GAAc,KAAKT,IAAL,CAAUS,CAAxB;AACAJ,8BAAcK,SAAd,GAA0B5B,GAAG6B,EAAH,CAAMC,KAAKC,GAAL,CAASX,IAAIU,KAAKE,EAAT,GAAc,GAAvB,CAAN,EAAmCF,KAAKG,GAAL,CAASb,IAAIU,KAAKE,EAAT,GAAc,GAAvB,CAAnC,CAA1B;AACAT,8BAAcW,KAAd,GAAsB,KAAKxB,WAA3B;;AAEA,qBAAKQ,IAAL,CAAUiB,MAAV,CAAiBC,QAAjB,CAA0Bf,SAA1B;AACH;AAEJ;;AAED,aAAKgB,OAAL,CAAaC,IAAb;AACA,YAAIC,QAAQvC,GAAGsB,WAAH,CAAe,KAAKkB,WAApB,CAAZ;;AAEA,aAAKtB,IAAL,CAAUiB,MAAV,CAAiBC,QAAjB,CAA0BG,KAA1B;AACAA,cAAME,WAAN,CAAkB,KAAKvB,IAAL,CAAUQ,CAA5B,EAA+B,KAAKR,IAAL,CAAUS,CAAzC;;AAEA,YAAIe,gBAAgBH,MAAMf,YAAN,CAAmBxB,GAAG2C,SAAtB,CAApB;AACAD,sBAAcJ,IAAd,CAAmB,QAAnB;;AAEA,aAAKpB,IAAL,CAAU0B,OAAV;AACA,aAAK1B,IAAL,CAAUiB,MAAV,CAAiBU,eAAjB;AACH,KAjDI;AAmDLC,SAnDK,mBAmDG,CAAE,CAnDL;AAqDLC,UArDK,kBAqDEC,EArDF,EAqDM;AACP,aAAKC,MAAL;AACH;AAvDI,CAAT","file":"EnemyStatic.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\scripts\\Game","sourcesContent":["// Learn cc.Class:\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/class.html\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/class.html\n// Learn Attribute:\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\n//  - [English] https://www.cocos2d-x.org/docs/creator/manual/en/scripting/life-cycle-callbacks.html\n\ncc.Class({\n    extends: require(\"Enemy\"),\n\n    properties: {\n        shootNum: 8,\n        BulletPrefab: {\n            type: cc.Prefab,\n            default: null,\n        },\n        bulletSpeed: 60,\n    },\n\n    // LIFE-CYCLE CALLBACKS:\n\n    onLoad() {\n        cc.director.getCollisionManager().enabled = true;\n    },\n\n    onCollisionEnter(other, self) {\n        if (other.node.group == \"Bind\") {\n\n            for (let i = 0; i < 360; i += 360 / this.shootNum) {\n                // 构造新子弹，并设置参数\n                let newBullet = cc.instantiate(this.BulletPrefab)\n                let bulletSetting = newBullet.getComponent(\"Bullet\")\n\n                newBullet.rotation = 90 - i\n\n                newBullet.x = this.node.x\n                newBullet.y = this.node.y\n                bulletSetting.direction = cc.v2(Math.cos(i * Math.PI / 180), Math.sin(i * Math.PI / 180))\n                bulletSetting.speed = this.bulletSpeed\n\n                this.node.parent.addChild(newBullet)\n            }\n\n        }\n        \n        this.Explode.play()\n        var blast = cc.instantiate(this.BlastPrefab)\n\n        this.node.parent.addChild(blast)\n        blast.setPosition(this.node.x, this.node.y)\n\n        var animComponent = blast.getComponent(cc.Animation)\n        animComponent.play('blast3')\n\n        this.node.destroy()\n        this.node.parent.sortAllChildren()\n    },\n\n    start() {},\n\n    update(dt) {\n        this.rotate()\n    },\n});"]}