{"version":3,"sources":["..\\..\\..\\..\\..\\assets\\scripts\\Game/assets\\scripts\\Game\\EnemyStatic.js"],"names":["cc","Class","extends","require","properties","shootNum","BulletPrefab","type","Prefab","default","bulletSpeed","onLoad","director","getCollisionManager","enabled","onCollisionEnter","other","self","node","group","shoot","explode","i","createBullet","x","y","v2","Math","cos","PI","sin","Explode","play","blast","instantiate","BlastPrefab","parent","addChild","setPosition","animComponent","getComponent","Animation","destroy","direction","zIndex","rotation","speed","newBullet","bulletSetting","start","update","dt","rotate"],"mappings":";;;;;;AAAA;;;;AAIAA,GAAGC,KAAH,CAAS;AACLC,aAASC,QAAQ,OAAR,CADJ;;AAGLC,gBAAY;AACRC,kBAAU,CADF;AAERC,sBAAc;AACVC,kBAAMP,GAAGQ,MADC;AAEVC,qBAAS;AAFC,SAFN;AAMRC,qBAAa;AANL,KAHP;;AAaL;;;;AAIAC,UAjBK,oBAiBI;AACL;AACAX,WAAGY,QAAH,CAAYC,mBAAZ,GAAkCC,OAAlC,GAA4C,IAA5C;AACH,KApBI;;;AAsBL;;;;AAIAC,oBA1BK,4BA0BYC,KA1BZ,EA0BmBC,IA1BnB,EA0ByB;AAC1B,YAAID,MAAME,IAAN,CAAWC,KAAX,KAAqB,MAArB,IAA+BH,MAAME,IAAN,CAAWC,KAAX,KAAqB,QAApD,IAAgEH,MAAME,IAAN,CAAWC,KAAX,KAAqB,QAAzF,EAAoG;AACpG;AACI,iBAAKC,KAAL;AACA,iBAAKC,OAAL;AACH;AACJ,KAhCI;;;AAkCL;;;;AAIAD,SAtCK,mBAsCI;AACL,aAAK,IAAIE,IAAI,CAAb,EAAgBA,IAAI,GAApB,EAAyBA,KAAK,MAAM,KAAKjB,QAAzC,EAAmD;AAC/C;AACA,iBAAKkB,YAAL,CAAkB,KAAKL,IAAL,CAAUM,CAA5B,EAA+B,KAAKN,IAAL,CAAUO,CAAzC,EACIzB,GAAG0B,EAAH,CAAMC,KAAKC,GAAL,CAASN,IAAIK,KAAKE,EAAT,GAAc,GAAvB,CAAN,EAAmCF,KAAKG,GAAL,CAASR,IAAIK,KAAKE,EAAT,GAAc,GAAvB,CAAnC,CADJ,EAEI,CAAC,CAFL,EAEQ,KAAKP,CAFb,EAEgB,KAAKZ,WAFrB;AAIH;AAEJ,KA/CI;;;AAiDL;;;;AAIAW,WArDK,qBAqDM;AACP;AACA,aAAKU,OAAL,CAAaC,IAAb;AACA,YAAIC,QAAQjC,GAAGkC,WAAH,CAAe,KAAKC,WAApB,CAAZ;AACA,aAAKjB,IAAL,CAAUkB,MAAV,CAAiBC,QAAjB,CAA0BJ,KAA1B;AACAA,cAAMK,WAAN,CAAkB,KAAKpB,IAAL,CAAUM,CAA5B,EAA+B,KAAKN,IAAL,CAAUO,CAAzC;AACA,YAAIc,gBAAgBN,MAAMO,YAAN,CAAmBxC,GAAGyC,SAAtB,CAApB;AACAF,sBAAcP,IAAd,CAAmB,QAAnB;;AAEA;AACA,aAAKd,IAAL,CAAUwB,OAAV;AACH,KAhEI;;;AAkEL;;;;AAIAnB,gBAtEK,wBAsESC,CAtET,EAsEYC,CAtEZ,EAsEekB,SAtEf,EAsE0BC,MAtE1B,EAsEkCC,QAtElC,EAsE4CC,KAtE5C,EAsEmD;AACpD,YAAIC,YAAY/C,GAAGkC,WAAH,CAAe,KAAK5B,YAApB,CAAhB;AACA,YAAI0C,gBAAgBD,UAAUP,YAAV,CAAuB,QAAvB,CAApB;AACAO,kBAAUF,QAAV,GAAqB,MAAMA,QAA3B;AACAE,kBAAUvB,CAAV,GAAcA,CAAd;AACAuB,kBAAUtB,CAAV,GAAcA,CAAd;AACAsB,kBAAUH,MAAV,GAAmBA,MAAnB;AACAI,sBAAcL,SAAd,GAA0BA,SAA1B;AACAK,sBAAcF,KAAd,GAAsBA,KAAtB;AACA,aAAK5B,IAAL,CAAUkB,MAAV,CAAiBC,QAAjB,CAA0BU,SAA1B;AACH,KAhFI;AAkFLE,SAlFK,mBAkFG,CAAE,CAlFL;;;AAoFL;AACAC,UArFK,kBAqFEC,EArFF,EAqFM;AACP,aAAKC,MAAL;AACH;AAvFI,CAAT","file":"EnemyStatic.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\scripts\\Game","sourcesContent":["/*\n * 静态敌人脚本\n */\n\ncc.Class({\n    extends: require(\"Enemy\"),\n\n    properties: {\n        shootNum: 8,\n        BulletPrefab: {\n            type: cc.Prefab,\n            default: null,\n        },\n        bulletSpeed: 60,\n    },\n\n\n    /*\n     * 初始化函数\n     * 功能：初始化脚本运行所需的设定\n     */\n    onLoad() {\n        // 开启碰撞检测\n        cc.director.getCollisionManager().enabled = true;\n    },\n\n    /*\n     * 碰撞函数\n     * 功能：对象被碰撞时调用此函数\n     */\n    onCollisionEnter(other, self) {\n        if (other.node.group === \"Bind\" || other.node.group === \"Player\" || other.node.group === \"Shield\" ) {\n        // 如果被链接、主角或者护盾撞击，则该对象发生爆炸\n            this.shoot()\n            this.explode()\n        }\n    },\n\n    /*\n     * 射击函数\n     * 功能：当敌人破裂时向四周发射子弹\n     */\n    shoot () {\n        for (let i = 0; i < 360; i += 360 / this.shootNum) {\n            // 构造新子弹，并设置参数\n            this.createBullet(this.node.x, this.node.y, \n                cc.v2(Math.cos(i * Math.PI / 180), Math.sin(i * Math.PI / 180)),\n                -1, 90 - i, this.bulletSpeed\n            )\n        }\n\n    },\n\n    /*\n     * 爆炸函数\n     * 功能：产生爆炸动画并销毁自身\n     */\n    explode () {\n        // 产生动画\n        this.Explode.play()\n        var blast = cc.instantiate(this.BlastPrefab)\n        this.node.parent.addChild(blast)\n        blast.setPosition(this.node.x, this.node.y)\n        var animComponent = blast.getComponent(cc.Animation)\n        animComponent.play('blast3')\n\n        // 销毁本节点\n        this.node.destroy()\n    },\n\n    /*\n     * 产生子弹函数\n     * 功能：按照给定的参数实例化一个子弹对象，并加入到父节点中\n     */ \n    createBullet (x, y, direction, zIndex, rotation, speed) {\n        var newBullet = cc.instantiate(this.BulletPrefab)\n        var bulletSetting = newBullet.getComponent('Bullet')\n        newBullet.rotation = 450 - rotation\n        newBullet.x = x\n        newBullet.y = y\n        newBullet.zIndex = zIndex\n        bulletSetting.direction = direction\n        bulletSetting.speed = speed\n        this.node.parent.addChild(newBullet)\n    },\n\n    start() {},\n\n    // 系统调用的更新函数\n    update(dt) {\n        this.rotate()\n    },\n});"]}