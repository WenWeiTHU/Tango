{"version":3,"sources":["..\\..\\..\\..\\..\\assets\\scripts\\Game/assets\\scripts\\Game\\EnemySpin.js"],"names":["cc","Class","extends","require","properties","Player","type","Node","default","override","centerX","centerY","centerSpeed","radius","circulateUpdate","onLoad","director","getCollisionManager","enabled","circulate","angle","circulateDir","node","x","Math","sin","PI","y","cos","start","onCollisionEnter","other","self","group","Explode","play","blast","instantiate","BlastPrefab","parent","addChild","setPosition","animComponent","getComponent","Animation","destroy","update","dt","rotate","dir","v2","distance","mag"],"mappings":";;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEAA,GAAGC,KAAH,CAAS;AACLC,aAASC,QAAQ,YAAR,CADJ;;AAGLC,gBAAY;AACRC,gBAAQ;AACJC,kBAAMN,GAAGO,IADL;AAEJC,qBAAS,IAFL;AAGJC,sBAAU;AAHN,SADA;AAMRC,iBAAS,CAND;AAORC,iBAAS,CAPD;AAQRC,qBAAa,EARL;AASRC,gBAAQ,GATA;AAURC,yBAAiB;AAVT,KAHP;;AAgBL;;AAEAC,UAlBK,oBAkBK;AACNf,WAAGgB,QAAH,CAAYC,mBAAZ,GAAkCC,OAAlC,GAA4C,IAA5C;AACH,KApBI;;;AAsBLC,eAAW,qBAAY;AACnB,aAAKC,KAAL,IAAc,KAAKC,YAAL,GAAkB,KAAKP,eAArC;;AAEA,aAAKM,KAAL,GAAa,KAAKA,KAAL,GAAa,GAAb,GAAmB,KAAKA,KAAL,GAAa,GAAhC,GAAsC,KAAKA,KAAxD;;AAEA,aAAKE,IAAL,CAAUC,CAAV,GAAc,KAAKb,OAAL,GAAe,KAAKG,MAAL,GAAcW,KAAKC,GAAL,CAAS,KAAKL,KAAL,GAAaI,KAAKE,EAAlB,GAAuB,GAAhC,CAA3C;AACA,aAAKJ,IAAL,CAAUK,CAAV,GAAc,KAAKhB,OAAL,GAAe,KAAKE,MAAL,GAAcW,KAAKI,GAAL,CAAS,KAAKR,KAAL,GAAaI,KAAKE,EAAlB,GAAuB,GAAhC,CAA3C;AACH,KA7BI;;AA+BLG,SA/BK,mBA+BG;AACJ,aAAKT,KAAL,GAAa,CAAb;AACA,aAAKC,YAAL,GAAoB,CAApB;AACH,KAlCI;AAoCLS,oBApCK,4BAoCaC,KApCb,EAoCoBC,IApCpB,EAoC0B;AAC3B,YAAID,MAAMT,IAAN,CAAWW,KAAX,IAAoB,KAAxB,EAA+B;AAC3B,iBAAKZ,YAAL,IAAqB,CAAC,CAAtB;AACA;AACH,SAHD,MAIK;AACD,iBAAKa,OAAL,CAAaC,IAAb;AACA,gBAAIC,QAAQpC,GAAGqC,WAAH,CAAe,KAAKC,WAApB,CAAZ;;AAEA,iBAAKhB,IAAL,CAAUiB,MAAV,CAAiBC,QAAjB,CAA0BJ,KAA1B;AACAA,kBAAMK,WAAN,CAAkB,KAAKnB,IAAL,CAAUC,CAA5B,EAA+B,KAAKD,IAAL,CAAUK,CAAzC;;AAEA,gBAAIe,gBAAgBN,MAAMO,YAAN,CAAmB3C,GAAG4C,SAAtB,CAApB;AACAF,0BAAcP,IAAd,CAAmB,QAAnB;;AAEA,iBAAKb,IAAL,CAAUuB,OAAV;AACH;AACJ,KArDI;AAuDLC,UAvDK,kBAuDEC,EAvDF,EAuDM;AACP,aAAKC,MAAL;;AAEA,aAAKC,GAAL,GAAWjD,GAAGkD,EAAH,CAAM,KAAK7C,MAAL,CAAYkB,CAAZ,GAAgB,KAAKb,OAA3B,EAAoC,KAAKL,MAAL,CAAYsB,CAAZ,GAAgB,KAAKhB,OAAzD,CAAX;AACA,aAAKwC,QAAL,GAAgB,KAAKF,GAAL,CAASG,GAAT,EAAhB;;AAEA,aAAK1C,OAAL,IAAgB,KAAKuC,GAAL,CAAS1B,CAAT,GAAa,KAAK4B,QAAlB,GAA6B,KAAKvC,WAAlC,GAAgDmC,EAAhE;AACA,aAAKpC,OAAL,IAAgB,KAAKsC,GAAL,CAAStB,CAAT,GAAa,KAAKwB,QAAlB,GAA6B,KAAKvC,WAAlC,GAAgDmC,EAAhE;AACA,aAAK5B,SAAL;AACH;AAhEI,CAAT","file":"EnemySpin.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\scripts\\Game","sourcesContent":["// Learn cc.Class:\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/class.html\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/class.html\n// Learn Attribute:\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\n//  - [English] https://www.cocos2d-x.org/docs/creator/manual/en/scripting/life-cycle-callbacks.html\n\ncc.Class({\n    extends: require(\"EnemyTrack\"),\n\n    properties: {\n        Player: {\n            type: cc.Node,\n            default: null,\n            override: true\n        },\n        centerX: 0,\n        centerY: 0,\n        centerSpeed: 50,\n        radius: 100,\n        circulateUpdate: 2,\n    },\n\n    // LIFE-CYCLE CALLBACKS:\n\n    onLoad () {\n        cc.director.getCollisionManager().enabled = true;\n    },\n\n    circulate: function () {\n        this.angle += this.circulateDir*this.circulateUpdate;\n\n        this.angle = this.angle > 360 ? this.angle - 360 : this.angle\n\n        this.node.x = this.centerX + this.radius * Math.sin(this.angle * Math.PI / 180)\n        this.node.y = this.centerY + this.radius * Math.cos(this.angle * Math.PI / 180)\n    },\n\n    start() {\n        this.angle = 0\n        this.circulateDir = 1\n    },\n    \n    onCollisionEnter (other, self) {\n        if (other.node.group == \"Map\") {\n            this.circulateDir *= -1\n            return\n        }\n        else {\n            this.Explode.play()\n            var blast = cc.instantiate(this.BlastPrefab)\n\n            this.node.parent.addChild(blast)\n            blast.setPosition(this.node.x, this.node.y)\n\n            var animComponent = blast.getComponent(cc.Animation)\n            animComponent.play('blast3')\n\n            this.node.destroy()\n        }\n    },\n\n    update(dt) {\n        this.rotate()\n\n        this.dir = cc.v2(this.Player.x - this.centerX, this.Player.y - this.centerY)\n        this.distance = this.dir.mag()\n\n        this.centerX += this.dir.x / this.distance * this.centerSpeed * dt\n        this.centerY += this.dir.y / this.distance * this.centerSpeed * dt\n        this.circulate()\n    },\n});"]}