{"version":3,"sources":["..\\..\\..\\..\\assets\\scripts/assets\\scripts\\Player.js"],"names":["cc","Class","extends","Component","properties","accel","speedX","speedY","resistance","onLoad","director","getCollisionManager","enabled","onCollisionEnter","other","self","group","node","mapCollision","enemyCollision","supplyCollision","console","log","obj_map","name","obj_enemy","start","update","dt","x","y"],"mappings":"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","file":"Player.js","sourceRoot":"..\\..\\..\\..\\assets\\scripts","sourcesContent":["// Learn cc.Class:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/class.html\r\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/class.html\r\n// Learn Attribute:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\r\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\r\n//  - [English] https://www.cocos2d-x.org/docs/creator/manual/en/scripting/life-cycle-callbacks.html\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        accel: 0,\r\n        speedX: 0,\r\n        speedY: 0,\r\n        resistance: 0,\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad() {\r\n        cc.director.getCollisionManager().enabled = true;\r\n    },\r\n\r\n    /*\r\n     * 角色的碰撞事件\r\n     */\r\n    onCollisionEnter(other, self) {\r\n        // 获取碰撞对象的类型\r\n        var group = other.node.group;\r\n        switch (group) {\r\n            case 'Map': {\r\n                // 当碰到的是地图边界时\r\n                this.mapCollision(other);\r\n                break;\r\n            }\r\n            case 'Enemy': {\r\n                // 当碰到了敌人时\r\n                this.enemyCollision(other);\r\n                break;\r\n            }\r\n            case 'Supply': {\r\n                // 当碰到了补给\r\n                this.supplyCollision(other);\r\n            }\r\n\r\n            // Others\r\n        }\r\n    },\r\n\r\n    /*\r\n     * 与补给的碰撞事件\r\n     */\r\n    supplyCollision (other) {\r\n        console.log(\"Supply!\");\r\n    },\r\n\r\n    /*\r\n     * 与地图的碰撞事件\r\n     */\r\n    mapCollision(obj_map) {\r\n        var name = obj_map.node.name;\r\n        switch (name) {\r\n            case 'mapLeft': {\r\n                this.speedX = -this.speedX;\r\n                break;\r\n            }\r\n            case 'mapRight': {\r\n                this.speedX = -this.speedX;\r\n                break;\r\n            }\r\n            case 'mapUp': {\r\n                this.speedY = -this.speedY;\r\n                break;\r\n            }\r\n            case 'mapDown': {\r\n                this.speedY = -this.speedY;\r\n                break;\r\n            }\r\n        }\r\n    },\r\n\r\n    /*\r\n     * 与敌人的碰撞事件\r\n     */\r\n    enemyCollision(obj_enemy) {\r\n        var name = obj_enemy.node.name;\r\n        switch (name) {\r\n            case 'battery': {\r\n                this.speedX = -this.speedX;\r\n                this.speedY = -this.speedY;\r\n                // TODO: 扣血\r\n                break;\r\n            }\r\n            case 'enemy_spin': \r\n            case 'enemy_swing':\r\n            case 'enemy_track': {\r\n                // TODO: 扣血\r\n                break;\r\n            }\r\n            \r\n        }\r\n    },\r\n\r\n    start() {\r\n\r\n    },\r\n    update(dt) {\r\n        // 运动\r\n        this.node.x += this.speedX * dt;\r\n        this.node.y += this.speedY * dt;\r\n\r\n        // 阻力\r\n        if (this.speedX > this.resistance) {\r\n            this.speedX -= this.speedX * 0.01;\r\n        } else if (this.speedX < -this.resistance) {\r\n            this.speedX -= this.speedX * 0.01;\r\n        }\r\n\r\n        if (this.speedY > this.resistance) {\r\n            this.speedY -= this.speedY * 0.01;\r\n        } else if (this.speedY < -this.resistance) {\r\n            this.speedY -= this.speedY * 0.01;\r\n        }\r\n    }\r\n});"]}