{"version":3,"sources":["..\\..\\..\\..\\..\\assets\\scripts\\Game/assets\\scripts\\Game\\Enemy.js"],"names":["cc","Class","extends","Component","properties","accel","speedX","speedY","rotationUpdate","BlastPrefab","type","Prefab","default","Explode","AudioSource","rotate","newDegree","node","rotation","Math","PI","onLoad","manager","director","getCollisionManager","enabled","start","onCollisionEnter","other","self","group","play","blast","instantiate","parent","addChild","setPosition","x","y","animComponent","getComponent","Animation","destroy","update","dt"],"mappings":";;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACRC,eAAO,CADC,EACgB;AACxBC,gBAAQ,CAFA,EAEgB;AACxBC,gBAAQ,CAHA,EAGgB;AACxBC,wBAAiB,EAJT,EAIgB;AACxBC,qBAAa;AACTC,kBAAKV,GAAGW,MADC;AAETC,qBAAS;AAFA,SALL;AASRC,iBAAS;AACLH,kBAAMV,GAAGc,WADJ;AAELF,qBAAS;AAFJ;AATD,KAHP;;AAkBL;AACAG,YAAQ,kBAAU;AACd,YAAIC,YAAY,KAAKC,IAAL,CAAUC,QAAV,GAAsB,KAAKV,cAAL,GAAoBW,KAAKC,EAA/D;AACA,aAAKH,IAAL,CAAUC,QAAV,GAAqBF,YAAY,GAAZ,GAAkBA,YAAY,GAA9B,GAAoCA,SAAzD;AACH,KAtBI;;AAwBL;;AAEAK,UA1BK,oBA0BK;AACN,aAAKC,OAAL,GAAetB,GAAGuB,QAAH,CAAYC,mBAAZ,EAAf;AACA,aAAKF,OAAL,CAAaG,OAAb,GAAuB,IAAvB;AACH,KA7BI;AAiCLC,SAjCK,mBAiCI,CACR,CAlCI;AAoCLC,oBApCK,4BAoCaC,KApCb,EAoCoBC,IApCpB,EAoC0B;AAC3B;AACA,YAAID,MAAMX,IAAN,CAAWa,KAAX,KAAqB,KAAzB,EAAgC;AAC5B,iBAAKxB,MAAL,IAAe,CAAC,CAAhB;AACA,iBAAKC,MAAL,IAAe,CAAC,CAAhB;AACA;AACH;AACD;AALA,aAMK;AACD,qBAAKM,OAAL,CAAakB,IAAb;;AAEA,oBAAIC,QAAQhC,GAAGiC,WAAH,CAAe,KAAKxB,WAApB,CAAZ;;AAEA,qBAAKQ,IAAL,CAAUiB,MAAV,CAAiBC,QAAjB,CAA0BH,KAA1B;AACAA,sBAAMI,WAAN,CAAkB,KAAKnB,IAAL,CAAUoB,CAA5B,EAA+B,KAAKpB,IAAL,CAAUqB,CAAzC;;AAEA,oBAAIC,gBAAgBP,MAAMQ,YAAN,CAAmBxC,GAAGyC,SAAtB,CAApB;AACAF,8BAAcR,IAAd,CAAmB,QAAnB;;AAGA,qBAAKd,IAAL,CAAUyB,OAAV;AACH;AACJ,KA1DI;;;AA4DL;AACAC,UA7DK,kBA6DGC,EA7DH,EA6DO;AACR,aAAK7B,MAAL;;AAEA,aAAKE,IAAL,CAAUoB,CAAV,IAAe,KAAK/B,MAAL,GAAcsC,EAA7B;AACA,aAAK3B,IAAL,CAAUqB,CAAV,IAAe,KAAK/B,MAAL,GAAcqC,EAA7B;AACH;AAlEI,CAAT","file":"Enemy.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\scripts\\Game","sourcesContent":["// Learn cc.Class:\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/class.html\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/class.html\n// Learn Attribute:\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\n//  - [English] https://www.cocos2d-x.org/docs/creator/manual/en/scripting/life-cycle-callbacks.html\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        accel: 0,               // 敌机加速度\n        speedX: 0,              // 敌机X方向速度\n        speedY: 0,              // 敌机Y方向速度\n        rotationUpdate : 20,    // 敌机自转时长\n        BlastPrefab: {\n            type:cc.Prefab,\n            default: null,\n        },\n        Explode: {\n            type: cc.AudioSource,\n            default: null\n        }\n    },\n\n    // 自转\n    rotate: function(){\n        var newDegree = this.node.rotation + (this.rotationUpdate/Math.PI)\n        this.node.rotation = newDegree > 360 ? newDegree - 360 : newDegree\n    },\n\n    // LIFE-CYCLE CALLBACKS:\n\n    onLoad () {\n        this.manager = cc.director.getCollisionManager();\n        this.manager.enabled = true;\n    },\n\n    \n\n    start () {\n    },\n\n    onCollisionEnter (other, self) {\n        // 直接回弹\n        if (other.node.group === \"Map\") {\n            this.speedX *= -1\n            this.speedY *= -1\n            return\n        }\n        // 碰撞主角,链接,护盾则爆炸\n        else {\n            this.Explode.play()\n            \n            var blast = cc.instantiate(this.BlastPrefab)\n\n            this.node.parent.addChild(blast)\n            blast.setPosition(this.node.x, this.node.y)\n\n            var animComponent = blast.getComponent(cc.Animation)\n            animComponent.play('blast3')\n\n        \n            this.node.destroy();\n        }\n    },\n\n    // 位置更新\n    update (dt) {\n        this.rotate()\n\n        this.node.x += this.speedX * dt\n        this.node.y += this.speedY * dt\n    },\n});\n"]}