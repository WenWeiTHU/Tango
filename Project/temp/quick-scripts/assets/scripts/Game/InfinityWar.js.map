{"version":3,"sources":["InfinityWar.js"],"names":["cc","Class","extends","Component","properties","Player1","type","Node","default","Player2","SupplyPrefab","Prefab","PauseMenuPrefab","ShieldSupplyPrefab","EnemyPrefab","StaticEnemyPrefab","TrackEnemyPrefab","SpinEnemyPrefab","SwingEnemyPrefab","CopterEnemyPrefab","BatteryPrefab","BulletPrefab","MapVPrefab","MapHPrefab","Explode","AudioSource","TimeLabel","Label","pauseBtn","Button","MainCamera","Camera","Width","Height","borderSize","stateChange","getRandomPosition","maxX","randX","Math","random","maxY","randY","v2","generate","posX","posY","name","thing","instantiate","getComponent","Player","centerX","centerY","node","getChildByName","addChild","setPosition","onLoad","i","children","length","zIndex","sortAllChildren","on","pauseScene","start","time","scheduleOnce","initGame","schedule","updateTime","pause","string","SupplyHelp","EnemyAttack","StaticEnemyAttack","TrackEnemyAttack","SpinEnemyAttack","BatteryPowerUp","CopterEnemyAttack","SwingEnemyAttack","BatteryAdd","child","active","grandSon","group","exist","timeID","clearTimeout","undefined","setTimeout","bind","Menu","x","y","pos","speedX","speedY","dir","targetposX","targetposY","num","duration","targetPosX","targetPosY","swingDuration","posx","posy","Battery","shootNum","update","dt","Dead","window","Global","zoomRatio","director","loadScene"],"mappings":"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","file":"InfinityWar.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\scripts\\Game","sourcesContent":["// Learn cc.Class:\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/class.html\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/class.html\n// Learn Attribute:\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\n//  - [English] https://www.cocos2d-x.org/docs/creator/manual/en/scripting/life-cycle-callbacks.html\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        Player1: {\n            type: cc.Node,\n            default: null,\n        },\n        Player2: {\n            type: cc.Node,\n            default: null,\n        },\n        SupplyPrefab: {\n            default: null,\n            type: cc.Prefab\n        },\n        PauseMenuPrefab: {\n            default: null,\n            type: cc.Prefab\n        },\n        ShieldSupplyPrefab: {\n            default: null,\n            type: cc.Prefab\n        },\n        EnemyPrefab: {\n            type: cc.Prefab,\n            default: null\n        },\n        StaticEnemyPrefab: {\n            type: cc.Prefab,\n            default: null\n        },\n        TrackEnemyPrefab: {\n            type: cc.Prefab,\n            default: null\n        },\n        SpinEnemyPrefab: {\n            type: cc.Prefab,\n            default: null\n        },\n        SwingEnemyPrefab: {\n            type: cc.Prefab,\n            default: null\n        },\n        CopterEnemyPrefab: {\n            type: cc.Prefab,\n            default: null\n        },\n        BatteryPrefab: {\n            type: cc.Prefab,\n            default: null\n        },\n        BulletPrefab: {\n            type: cc.Prefab,\n            default: null\n        },\n        MapVPrefab: {\n            type: cc.Prefab,\n            default: null\n        },\n        MapHPrefab: {\n            type: cc.Prefab,\n            default: null\n        },\n        Explode:{\n            type: cc.AudioSource,\n            default: null\n        },\n        TimeLabel:{\n            type: cc.Label, \n            default: null\n        },\n        pauseBtn: {\n            type: cc.Button,\n            default: null\n        },\n        MainCamera:{\n            type: cc.Camera,\n            default: null\n        },\n        Width: 2500,\n        Height: 2500,\n        borderSize: 45,\n        stateChange: false,\n    },\n\n    // TODO 避免重叠\n    // LIFE-CYCLE CALLBACKS:\n    getRandomPosition: function () {\n        var maxX = this.Width / 2 - this.borderSize;\n        var randX = (Math.random() - 0.5) * 2 * maxX\n        var maxY = this.Height / 2 - this.borderSize\n        var randY = (Math.random() - 0.5) * 2 * maxY\n\n        return cc.v2(randX, randY)\n    },\n\n    generate: function (posX, posY, name) {\n        let thing\n        switch (name) {\n            case 'enemy':\n                thing = cc.instantiate(this.EnemyPrefab)\n                thing.getComponent('Enemy').Explode = this.Explode\n                break\n            case 'staticEnemy':\n                thing = cc.instantiate(this.StaticEnemyPrefab)\n                thing.getComponent('EnemyStatic').Explode = this.Explode\n                break\n            case 'trackEnemy':\n                thing = cc.instantiate(this.TrackEnemyPrefab)\n                thing.getComponent('EnemyTrack').Explode = this.Explode\n                thing.getComponent('EnemyTrack').Player = Math.random() < 0.5 ? this.Player1 : this.Player2\n                break\n            case 'spinEnemy':\n                thing = cc.instantiate(this.SpinEnemyPrefab)\n                thing.getComponent('EnemySpin').Explode = this.Explode\n                thing.getComponent('EnemySpin').centerX = posX\n                thing.getComponent('EnemySpin').centerY = posY\n\n                thing.getComponent('EnemySpin').Player = Math.random() < 0.5 ? this.Player1 : this.Player2\n                break\n            case 'swingEnemy':\n                thing = cc.instantiate(this.SwingEnemyPrefab)\n                thing.getComponent('EnemySwing').Explode = this.Explode\n                break\n            case 'copterEnemy':\n                thing = cc.instantiate(this.CopterEnemyPrefab);\n                thing.getComponent('EnemyCopter').BulletPrefab = this.BulletPrefab\n                thing.getComponent('EnemyCopter').Explode = this.Explode\n\n                thing.getComponent('EnemySpin').centerX = posX\n                thing.getComponent('EnemySpin').centerY = posY\n\n                thing.getComponent('EnemyCopter').Player = Math.random() < 0.5 ? this.Player1 : this.Player2\n                break\n            case 'supply':\n                thing = cc.instantiate(this.SupplyPrefab)\n                break\n            case 'shieldSupply':\n                thing = cc.instantiate(this.ShieldSupplyPrefab)\n                break\n            case 'battery':\n                thing = cc.instantiate(this.BatteryPrefab)\n                thing.getComponent('Battery').Player1 = this.Player1\n                thing.getComponent('Battery').Player2 = this.Player2\n                thing.getComponent('Battery').BulletPrefab = this.BulletPrefab\n                break\n        }\n        if (name == 'battery') {\n            this.node.getChildByName('Map').addChild(thing)\n        } else {\n            this.node.getChildByName('Enemy').addChild(thing)\n        }\n        thing.setPosition(posX, posY)\n        return thing\n    },\n\n\n    onLoad() {\n        for (var i = 0; i < this.node.children.length; ++i) {\n            switch (this.node.children[i].name) {\n                case 'player1': {\n                    this.node.children[i].zIndex = 100;\n                    break;\n                }\n                case 'player2': {\n                    this.node.children[i].zIndex = 100;\n                    break;\n                }\n                case 'stickLeft':\n                case 'stickRight': {\n                    this.node.children[i].zIndex = 101;\n                    break;\n                }\n                case 'bg': {\n                    this.node.children[i].zIndex = -100;\n                    break;\n                }\n            }\n        }\n        this.node.sortAllChildren()\n        this.pauseBtn.node.on('click', this.pauseScene, this)\n    },\n\n    start() {\n        this.time = 0\n        this.scheduleOnce(this.initGame, 0)\n        this.schedule(this.updateTime, 1)\n    },\n\n    updateTime: function(){\n        if (this.pause) {\n            return\n        }\n        this.time += 1\n        this.TimeLabel.string = 'Time: ' + this.time + 's'\n    },\n\n    initGame: function () {\n        this.generate(-500, 500, 'enemy')\n        this.generate(500, 500, 'enemy')\n        this.generate(500, -500, 'enemy')\n        this.generate(-500, -500, 'enemy')\n\n        this.generate(0, 0, 'supply')\n\n        this.SupplyHelp(20)\n\n        this.EnemyAttack(8)\n\n        this.scheduleOnce(() => {\n            this.StaticEnemyAttack(20)\n        }, 2)\n\n        this.scheduleOnce(() => {\n            this.TrackEnemyAttack(12)\n        }, 10)\n        \n        this.scheduleOnce(() => {\n            this.SpinEnemyAttack(13)\n        }, 20)\n\n        this.scheduleOnce(() => {\n            this.BatteryPowerUp(0, 0, 30)\n        }, 45)\n\n        this.scheduleOnce(() => {\n            this.CopterEnemyAttack(15)\n        }, 60)\n\n        this.scheduleOnce(() => {\n            this.SwingEnemyAttack('x', 2200, 0, 10 , 6)\n        }, 80)\n\n        this.scheduleOnce(() => {\n            this.SwingEnemyAttack('y', 0, 2200 ,10 , 6)\n        }, 100)\n\n        this.scheduleOnce(() => {\n            this.BatteryAdd(60)\n        }, 120)\n\n        this.scheduleOnce(() => {\n            this.SwingEnemyAttack('x', 1100, 1100 ,20 , 6)\n        }, 300)\n\n        this.scheduleOnce(() => {\n            this.SwingEnemyAttack('y', -1100, 1100 ,20 , 6)\n        }, 330)\n    },\n\n    pauseScene () {\n        for (var child of this.node.children) {\n            debugger;\n            switch (child.name) {\n                case 'Enemy':\n                case 'Map':\n                case 'player1':\n                case 'player2':\n                case 'bind':\n                case 'target': {\n                    child.active = this.pause\n                }\n                case 'UI': {\n                    for (var grandSon of child.children) {\n                        if (grandSon.group != 'Shield') {\n                            grandSon.active = this.pause\n                        } else {\n                            if (!this.pause) {\n                                grandSon.exist = grandSon.active\n                                grandSon.active = false\n                                if (grandSon.timeID) {\n                                    clearTimeout(grandSon.timeID)\n                                    grandSon.timeID = undefined\n                                }\n                            } else {\n                                grandSon.active = grandSon.exist\n                                grandSon.exist = false\n                                if (grandSon.active) {\n                                    if (grandSon.name == 'shieldLeft') {\n                                        grandSon.timeID = setTimeout(function(){\n                                            this.active = false\n                                        }.bind(this.node.getChildByName('UI').getChildByName('shieldLeft')), 2500)\n                                    }\n                                    else {\n                                        grandSon.timeID = setTimeout(function(){\n                                            this.active = false\n                                        }.bind(this.node.getChildByName('UI').getChildByName('shieldRight')), 2500)\n                                    }\n                                }\n                            }\n                        }\n                    }\n                    break\n                }\n            }\n        }\n        this.pause = this.pause ? false : true\n        if (this.pause) {\n            var Menu = cc.instantiate(this.PauseMenuPrefab)\n            Menu.x = 0\n            Menu.y = 0\n            Menu.group = 'UI'\n            this.node.getChildByName('UI').active = true\n            this.node.getChildByName(\"UI\").addChild(Menu)\n        }\n    },\n\n    EnemyAttack: function (time) {\n        this.schedule(() => {\n            for (let i = 0; i < 2; i++) {\n                let pos = this.getRandomPosition()\n                let thing = this.generate(pos.x, pos.y, 'enemy').getComponent('Enemy')\n                thing.speedX = 400 * (Math.random() - 0.5)\n                thing.speedY = 400 * (Math.random() - 0.5)\n            }\n        }, time)\n    },\n\n    StaticEnemyAttack: function (time) {\n        this.schedule(() => {\n            let pos = this.getRandomPosition()\n            this.generate(pos.x, pos.y, 'staticEnemy')\n        }, time)\n    },\n\n    TrackEnemyAttack: function (time) {\n        this.schedule(() => {\n            for (let i = 0; i < 2; i++) {\n                let pos = this.getRandomPosition()\n                this.generate(pos.x, pos.y, 'trackEnemy')\n            }\n        }, time)\n    },\n\n    SpinEnemyAttack: function (time) {\n        this.schedule(() => {\n            this.generate(this.Player1.x, this.Player1.y, 'spinEnemy')\n            this.generate(this.Player2.x, this.Player2.y, 'spinEnemy')\n        }, time)\n    },\n\n    CopterEnemyAttack: function (time) {\n        this.schedule(() => {\n            this.generate(this.Player1.x, this.Player1.y, 'copterEnemy')\n            this.generate(this.Player2.x, this.Player2.y, 'copterEnemy')\n        }, time)\n    },\n\n    SwingEnemyAttack(dir, targetposX, targetposY, num, duration){\n        this.scheduleOnce(() => {\n            for (let i = -1100; i < 1100; i += 2200 / (num  - 1)) {\n                let thing\n                if(dir === 'x'){\n                    thing = this.generate(-1100, i, 'swingEnemy').getComponent('EnemySwing')\n                }\n                else if(dir === 'y'){\n                    thing = this.generate(i, -1100, 'swingEnemy').getComponent('EnemySwing')\n                }\n                \n                thing.targetPosX = targetposX\n                thing.targetPosY = targetposY\n                thing.swingDuration = duration\n            }\n        }, 0)\n    },\n\n    SupplyHelp: function (time) {\n        this.schedule(() => {\n            let pos = this.getRandomPosition()\n            let num = Math.random()\n            if (num > 0.5) {\n                this.generate(pos.x, pos.y, 'shieldSupply')\n            } else {\n                this.generate(pos.x, pos.y, 'supply')\n            }\n        }, time)\n    },\n\n    BatteryAdd: function (time) {\n        this.scheduleOnce(() => {\n            this.generate(1100, 1100, 'battery')\n            this.scheduleOnce(() => {\n                this.generate(1100, -1100, 'battery')\n                this.scheduleOnce(() => {\n                    this.generate(-1100, -1100, 'battery')\n                }, time)\n            }, time)\n        }, time)\n    },\n\n    BatteryPowerUp: function (posx, posy, time) {\n        this.scheduleOnce(() => {\n            var Battery = this.generate(posx, posy, 'battery').getComponent('Battery')\n            Battery.shootNum = 1\n            this.scheduleOnce(() => {\n                Battery.shootNum = 2\n                this.scheduleOnce(() => {\n                    Battery.shootNum = 3\n                    this.scheduleOnce(() => {\n                        Battery.shootNum = 4\n                    }, time)\n                }, time)\n            }, time)\n        }, time)\n    },\n\n    update(dt) {\n        if (this.stateChange) {\n            this.pauseScene()\n            this.stateChange = false\n        }\n\n        if (this.Player1.getComponent('Player').Dead) {\n            window.Global = {\n                time: this.time\n            }\n\n            this.schedule(() => {\n                this.MainCamera.zoomRatio -= 0.0003\n            }, 0.05)\n            \n            this.scheduleOnce(()=>{\n                cc.director.loadScene(\"Transition\")\n            }, 2) \n        }\n        if (this.Player2.getComponent('Player').Dead) {\n            window.Global = {\n                time: this.time\n            }\n            this.schedule(() => {\n                this.MainCamera.zoomRatio -= 0.0003\n            }, 0.05)\n            \n            this.scheduleOnce(()=>{\n                cc.director.loadScene(\"Transition\")\n            }, 2) \n        }\n    },\n});"]}