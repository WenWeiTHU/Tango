{"version":3,"sources":["Bullet.js"],"names":["cc","Class","extends","Component","properties","direction","speed","BulletBreakPrefab","type","Prefab","default","onLoad","director","getCollisionManager","enabled","setDirection","start","directionX","x","mag","directionY","y","onCollisionEnter","other","self","blast","instantiate","node","parent","addChild","setPosition","animComponent","getComponent","Animation","play","destroy","updatePos","dt","update"],"mappings":";;;;;;AAAA;;;;AAIAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACRC,mBAAW,CADH;AAERC,eAAO,CAFC;AAGRC,2BAAmB;AACfC,kBAAKR,GAAGS,MADO;AAEfC,qBAAS;AAFM;AAHX,KAHP;;AAaL;;;;AAIAC,UAjBK,oBAiBK;AACNX,WAAGY,QAAH,CAAYC,mBAAZ,GAAkCC,OAAlC,GAA4C,IAA5C;AACA,aAAKC,YAAL;AACH,KApBI;AAsBLC,SAtBK,mBAsBI,CACR,CAvBI;;;AAyBL;;;;AAIAD,gBA7BK,0BA6BW;AACZ,YAAI,KAAKV,SAAL,KAAmB,CAAvB,EAA0B;AACtB;AACH;AACD,aAAKY,UAAL,GAAkB,KAAKZ,SAAL,CAAea,CAAf,GAAmB,KAAKb,SAAL,CAAec,GAAf,EAArC;AACA,aAAKC,UAAL,GAAkB,KAAKf,SAAL,CAAegB,CAAf,GAAmB,KAAKhB,SAAL,CAAec,GAAf,EAArC;AACH,KAnCI;;;AAqCL;;;;AAIAG,oBAzCK,4BAyCaC,KAzCb,EAyCoBC,IAzCpB,EAyC0B;AAC3B;AACA,YAAIC,QAAQzB,GAAG0B,WAAH,CAAe,KAAKnB,iBAApB,CAAZ;AACA,aAAKoB,IAAL,CAAUC,MAAV,CAAiBC,QAAjB,CAA0BJ,KAA1B;AACAA,cAAMK,WAAN,CAAkB,KAAKH,IAAL,CAAUT,CAA5B,EAA+B,KAAKS,IAAL,CAAUN,CAAzC;AACA,YAAIU,gBAAgBN,MAAMO,YAAN,CAAmBhC,GAAGiC,SAAtB,CAApB;AACAF,sBAAcG,IAAd,CAAmB,aAAnB;;AAEA;AACA,aAAKP,IAAL,CAAUQ,OAAV;AACH,KAnDI;;;AAqDL;;;;AAIAC,aAzDK,qBAyDMC,EAzDN,EAyDU;AACX,aAAKV,IAAL,CAAUT,CAAV,IAAe,KAAKZ,KAAL,GAAa,KAAKW,UAAlB,GAA+BoB,EAA9C;AACA,aAAKV,IAAL,CAAUN,CAAV,IAAe,KAAKf,KAAL,GAAa,KAAKc,UAAlB,GAA+BiB,EAA9C;AACH,KA5DI;;;AA8DL;AACAC,UA/DK,kBA+DGD,EA/DH,EA+DO;AACR,aAAKD,SAAL,CAAeC,EAAf;AACH;AAjEI,CAAT","file":"Bullet.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\scripts\\Game","sourcesContent":["/*\n * 子弹运行脚本\n */\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        direction: 0,\n        speed: 0,\n        BulletBreakPrefab: {\n            type:cc.Prefab,\n            default: null,\n        }\n    },\n\n\n    /*\n     * 初始化函数\n     * 功能：初始化子弹运行所需要的设置\n     */\n    onLoad () {\n        cc.director.getCollisionManager().enabled = true;\n        this.setDirection()\n    },\n\n    start () {\n    },\n\n    /*\n     * 设置方向函数\n     * 功能：设置子弹飞行的方向\n     */\n    setDirection () {\n        if (this.direction === 0) {\n            return\n        }\n        this.directionX = this.direction.x / this.direction.mag()\n        this.directionY = this.direction.y / this.direction.mag()\n    },\n    \n    /*\n     * 碰撞函数\n     * 功能：发生碰撞时调用，当发生碰撞时，产生一个动画效果，并销毁节点本身\n     */\n    onCollisionEnter (other, self) {\n        // 实例化动画并设置其参数\n        var blast = cc.instantiate(this.BulletBreakPrefab)\n        this.node.parent.addChild(blast)\n        blast.setPosition(this.node.x, this.node.y)\n        var animComponent = blast.getComponent(cc.Animation)\n        animComponent.play('bulletBreak')\n     \n        // 销毁自身节点\n        this.node.destroy();\n    },\n\n    /*\n     * 更新位置函数\n     * 功能：根据方向和时间更新节点的下一个位置\n     */\n    updatePos (dt) {\n        this.node.x += this.speed * this.directionX * dt\n        this.node.y += this.speed * this.directionY * dt\n    },\n\n    // 每帧更新时系统调用的更新函数\n    update (dt) {\n        this.updatePos(dt)\n    },\n});\n"]}