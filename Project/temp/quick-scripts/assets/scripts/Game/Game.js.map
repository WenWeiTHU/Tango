{"version":3,"sources":["Game.js"],"names":["cc","Class","extends","Component","properties","Player1","type","Node","default","Player2","SupplyPrefab","Prefab","ShieldSupplyPrefab","PauseMenuPrefab","EnemyPrefab","StaticEnemyPrefab","TrackEnemyPrefab","SpinEnemyPrefab","SwingEnemyPrefab","CopterEnemyPrefab","BatteryPrefab","BulletPrefab","MapVPrefab","MapHPrefab","Explode1","AudioSource","pauseBtn","Button","MapCamera","Camera","MainCamera","Target","srcX","srcY","dstX","dstY","cameraSpeed","ratio","Width","Height","borderSize","stateChange","getRandomPosition","maxX","randX","Math","random","maxY","randY","v2","generate","posX","posY","name","thing","instantiate","getComponent","Explode","Explode3","Player","Explode2","centerX","centerY","node","addChild","setPosition","GameOver","schedule","zoomRatio","scheduleOnce","director","loadScene","onLoad","on","pauseScene","i","children","length","zIndex","sortAllChildren","start","cameraMove","update","dt","Dead","temp","win","child","active","pause","grandSon","group","exist","timeID","clearTimeout","undefined","setTimeout","bind","getChildByName","Menu","x","y","srcx","srcy","dstx","dsty","initRatio"],"mappings":"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","file":"Game.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\scripts\\Game","sourcesContent":["// Learn cc.Class:\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/class.html\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/class.html\n// Learn Attribute:\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\n//  - [English] https://www.cocos2d-x.org/docs/creator/manual/en/scripting/life-cycle-callbacks.html\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        Player1: {\n            type: cc.Node,\n            default: null,\n        },\n        Player2: {\n            type: cc.Node,\n            default: null,\n        },\n        SupplyPrefab: {\n            default: null,\n            type: cc.Prefab\n        },\n        ShieldSupplyPrefab: {\n            default: null,\n            type: cc.Prefab\n        },\n        PauseMenuPrefab: {\n            default: null,\n            type: cc.Prefab\n        },\n        EnemyPrefab: {\n            type: cc.Prefab,\n            default: null\n        },\n        StaticEnemyPrefab: {\n            type: cc.Prefab,\n            default: null\n        },\n        TrackEnemyPrefab: {\n            type: cc.Prefab,\n            default: null\n        },\n        SpinEnemyPrefab: {\n            type: cc.Prefab,\n            default: null\n        },\n        SwingEnemyPrefab: {\n            type: cc.Prefab,\n            default: null\n        },\n        CopterEnemyPrefab: {\n            type: cc.Prefab,\n            default: null\n        },\n        BatteryPrefab: {\n            type: cc.Prefab,\n            default: null\n        },\n        BulletPrefab: {\n            type: cc.Prefab,\n            default: null\n        },\n        MapVPrefab: {\n            type: cc.Prefab,\n            default: null\n        },\n        MapHPrefab: {\n            type: cc.Prefab,\n            default: null\n        },\n        Explode1: {\n            type: cc.AudioSource,\n            default: null\n        },\n        pauseBtn: {\n            type: cc.Button,\n            default: null\n        },\n        MapCamera: {\n            type: cc.Camera,\n            default: null\n        },\n        MainCamera: {\n            type: cc.Camera,\n            default: null\n        },\n        Target: {\n            type: cc.Node,\n            default: null\n        },\n        srcX: 0,\n        srcY: 0,\n        dstX: 0,\n        dstY: 0,\n        cameraSpeed: 0,\n        ratio: 0,\n        Width: 2500,\n        Height: 2500,\n        borderSize: 35,\n        stateChange: false,\n    },\n\n    // TODO 避免重叠\n    // LIFE-CYCLE CALLBACKS:\n    getRandomPosition: function () {\n        var maxX = this.Width / 2 - this.borderSize;\n        var randX = (Math.random() - 0.5) * 2 * maxX\n        var maxY = this.Height / 2 - this.borderSize\n        var randY = (Math.random() - 0.5) * 2 * maxY\n\n        return cc.v2(randX, randY)\n    },\n\n    generate: function (posX, posY, name) {\n        let thing\n        switch (name) {\n            case 'enemy':\n                thing = cc.instantiate(this.EnemyPrefab)\n                thing.getComponent('Enemy').Explode = this.Explode1\n                break\n            case 'staticEnemy':\n                thing = cc.instantiate(this.StaticEnemyPrefab)\n                thing.getComponent('EnemyStatic').Explode = this.Explode3\n                break\n            case 'trackEnemy':\n                thing = cc.instantiate(this.TrackEnemyPrefab)\n                thing.getComponent('EnemyTrack').Explode = this.Explode1\n                thing.getComponent('EnemyTrack').Player = Math.random() < 0.5 ? this.Player1 : this.Player2\n                break\n            case 'spinEnemy':\n                thing = cc.instantiate(this.SpinEnemyPrefab)\n                thing.getComponent('EnemySpin').Explode = this.Explode2\n                thing.getComponent('EnemySpin').centerX = posX\n                thing.getComponent('EnemySpin').centerY = posY\n\n                thing.getComponent('EnemySpin').Player = Math.random() < 0.5 ? this.Player1 : this.Player2\n                break\n            case 'swingEnemy':\n                thing = cc.instantiate(this.SwingEnemyPrefab)\n                thing.getComponent('EnemySwing').Explode = this.Explode1\n                break\n            case 'copterEnemy':\n                thing = cc.instantiate(this.CopterEnemyPrefab);\n                thing.getComponent('EnemyCopter').BulletPrefab = this.BulletPrefab\n                thing.getComponent('EnemyCopter').Explode = this.Explode2\n\n                thing.getComponent('EnemySpin').centerX = posX\n                thing.getComponent('EnemySpin').centerY = posY\n\n                thing.getComponent('EnemyCopter').Player = Math.random() < 0.5 ? this.Player1 : this.Player2\n                break\n            case 'supply':\n                thing = cc.instantiate(this.SupplyPrefab)\n                break\n            case 'shieldSupply':\n                thing = cc.instantiate(this.ShieldSupplyPrefab)\n                break\n            case 'battery':\n                thing = cc.instantiate(this.BatteryPrefab)\n                thing.getComponent('Battery').Player1 = this.Player1\n                thing.getComponent('Battery').Player2 = this.Player2\n                thing.getComponent('Battery').BulletPrefab = this.BulletPrefab\n                break\n        }\n        this.node.addChild(thing)\n        thing.setPosition(posX, posY)\n        return thing\n    },\n\n    GameOver: function() {\n        this.schedule(() => {\n            this.MainCamera.zoomRatio -= 0.0003\n        }, 0.05)\n        \n        this.scheduleOnce(()=>{\n            cc.director.loadScene(\"Transition\")\n        }, 2) \n    },\n\n    onLoad() {\n        this.pauseBtn.node.on(\"click\", this.pauseScene, this)\n        for (var i = 0; i < this.node.children.length; ++i) {\n            switch (this.node.children[i].name) {\n                case 'player1': {\n                    this.node.children[i].zIndex = 100;\n                    break;\n                }\n                case 'player2': {\n                    this.node.children[i].zIndex = 100;\n                    break;\n                }\n                case 'stickLeft':\n                case 'stickRight': {\n                    this.node.children[i].zIndex = 101;\n                    break;\n                }\n                case 'bg': {\n                    this.node.children[i].zIndex = -100;\n                    break;\n                }\n            }\n        }\n        this.node.sortAllChildren();\n    },\n\n    start() {\n        this.stateChange = false\n        this.cameraMove(this.srcX, this.srcY, this.dstX, this.dstY, this.ratio)\n    },\n\n    update(dt) {\n        if (this.stateChange) {\n            this.pauseScene()\n            this.stateChange = false\n        }\n        if (this.Player1.getComponent('Player').Dead) {\n            this.GameOver()\n        }\n        if (this.Player2.getComponent('Player').Dead) {\n            this.GameOver()\n        }\n        debugger\n        var temp = this.Target.getComponent('Target').win\n        if (this.Target.getComponent('Target').win) {\n            this.GameOver()\n        }\n    },\n    pauseScene () {\n        for (var child of this.node.children) {\n            switch (child.name) {\n                case 'Enemy':\n                case 'Map':\n                case 'player1':\n                case 'player2':\n                case 'bind':\n                case 'target': {\n                    child.active = this.pause\n                }\n                case 'UI': {\n                    for (var grandSon of child.children) {\n                        if (grandSon.group != 'Shield') {\n                            grandSon.active = this.pause\n                        } else {\n                            if (!this.pause) {\n                                grandSon.exist = grandSon.active\n                                grandSon.active = false\n                                if (grandSon.timeID) {\n                                    clearTimeout(grandSon.timeID)\n                                    grandSon.timeID = undefined\n                                }\n                            } else {\n                                grandSon.active = grandSon.exist\n                                grandSon.exist = false\n                                if (grandSon.active) {\n                                    if (grandSon.name == 'shieldLeft') {\n                                        grandSon.timeID = setTimeout(function(){\n                                            this.active = false\n                                        }.bind(this.node.getChildByName('UI').getChildByName('shieldLeft')), 2500)\n                                    }\n                                    else {\n                                        grandSon.timeID = setTimeout(function(){\n                                            this.active = false\n                                        }.bind(this.node.getChildByName('UI').getChildByName('shieldRight')), 2500)\n                                    }\n                                }\n                            }\n                        }\n                    }\n                    break\n                }\n            }\n        }\n        this.pause = this.pause ? false : true\n        if (this.pause) {\n            var Menu = cc.instantiate(this.PauseMenuPrefab)\n            Menu.x = 0\n            Menu.y = 0\n            Menu.group = 'UI'\n            this.node.getChildByName('UI').active = true\n            this.node.getChildByName(\"UI\").addChild(Menu)\n        }\n    },\n    cameraMove: function(srcx, srcy, dstx, dsty, initRatio){\n        this.MapCamera.node.x = srcx\n        this.MapCamera.node.y = srcy\n\n        var x = dstx - srcx\n        var y = dsty - srcy\n\n        this.scheduleOnce(function(){\n            this.schedule(function(){\n                if(this.MapCamera.zoomRatio > 1){\n                    this.MapCamera.node.active = false\n                }\n                else{    \n                    this.MapCamera.zoomRatio += this.cameraSpeed\n                    this.MapCamera.node.x += x * this.cameraSpeed / (1 - initRatio)\n                    this.MapCamera.node.y += y * this.cameraSpeed / (1 - initRatio)\n                }\n            }, 0.0001)\n        }, 0.8)\n    }\n});"]}