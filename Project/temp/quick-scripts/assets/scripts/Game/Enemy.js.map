{"version":3,"sources":["Enemy.js"],"names":["cc","Class","extends","Component","properties","accel","speedX","speedY","rotationUpdate","BlastPrefab","type","Prefab","default","Explode","AudioSource","rotate","newDegree","node","rotation","Math","PI","onLoad","director","getCollisionManager","enabled","start","onCollisionEnter","other","self","group","explode","play","blast","instantiate","parent","addChild","setPosition","x","y","animComponent","getComponent","Animation","destroy","updatePos","dt","update"],"mappings":";;;;;;AAAA;;;;AAIAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACRC,eAAO,CADC,EACgB;AACxBC,gBAAQ,CAFA,EAEgB;AACxBC,gBAAQ,CAHA,EAGgB;AACxBC,wBAAiB,EAJT,EAIgB;AACxBC,qBAAa;AACTC,kBAAKV,GAAGW,MADC;AAETC,qBAAS;AAFA,SALL;AASRC,iBAAS;AACLH,kBAAMV,GAAGc,WADJ;AAELF,qBAAS;AAFJ;AATD,KAHP;;AAkBL;;;;AAIAG,UAtBK,oBAsBK;AACN,YAAIC,YAAY,KAAKC,IAAL,CAAUC,QAAV,GAAsB,KAAKV,cAAL,GAAoBW,KAAKC,EAA/D;AACA,aAAKH,IAAL,CAAUC,QAAV,GAAqBF,YAAY,GAAZ,GAAkBA,YAAY,GAA9B,GAAoCA,SAAzD;AACH,KAzBI;;;AA4BL;;;;AAIAK,UAhCK,oBAgCK;AACN;AACArB,WAAGsB,QAAH,CAAYC,mBAAZ,GAAkCC,OAAlC,GAA4C,IAA5C;AACH,KAnCI;AAuCLC,SAvCK,mBAuCI,CACR,CAxCI;;;AA0CL;;;;AAIAC,oBA9CK,4BA8CaC,KA9Cb,EA8CoBC,IA9CpB,EA8C0B;AAC3B;AACA,YAAID,MAAMV,IAAN,CAAWY,KAAX,KAAqB,KAAzB,EAAgC;AAC5B,iBAAKvB,MAAL,IAAe,CAAC,CAAhB;AACA,iBAAKC,MAAL,IAAe,CAAC,CAAhB;AACA;AACH,SAJD,MAIO;AACH;AACA,iBAAKuB,OAAL;AACH;AACJ,KAxDI;;;AA0DL;;;;AAIAA,WA9DK,qBA8DM;AACP;AACA,aAAKjB,OAAL,CAAakB,IAAb;AACA,YAAIC,QAAQhC,GAAGiC,WAAH,CAAe,KAAKxB,WAApB,CAAZ;AACA,aAAKQ,IAAL,CAAUiB,MAAV,CAAiBC,QAAjB,CAA0BH,KAA1B;AACAA,cAAMI,WAAN,CAAkB,KAAKnB,IAAL,CAAUoB,CAA5B,EAA+B,KAAKpB,IAAL,CAAUqB,CAAzC;AACA,YAAIC,gBAAgBP,MAAMQ,YAAN,CAAmBxC,GAAGyC,SAAtB,CAApB;AACAF,sBAAcR,IAAd,CAAmB,QAAnB;;AAEA;AACA,aAAKd,IAAL,CAAUyB,OAAV;AACH,KAzEI;;;AA2EL;;;;AAIAC,aA/EK,qBA+EMC,EA/EN,EA+EU;AACX,aAAK3B,IAAL,CAAUoB,CAAV,IAAe,KAAK/B,MAAL,GAAcsC,EAA7B;AACA,aAAK3B,IAAL,CAAUqB,CAAV,IAAe,KAAK/B,MAAL,GAAcqC,EAA7B;AACH,KAlFI;;;AAoFL;AACAC,UArFK,kBAqFGD,EArFH,EAqFO;AACR,aAAK7B,MAAL;AACA,aAAK4B,SAAL,CAAeC,EAAf;AACH;AAxFI,CAAT","file":"Enemy.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\scripts\\Game","sourcesContent":["/*\n * 普通敌人脚本\n */\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        accel: 0,               // 敌机加速度\n        speedX: 0,              // 敌机X方向速度\n        speedY: 0,              // 敌机Y方向速度\n        rotationUpdate : 20,    // 敌机自转时长\n        BlastPrefab: {\n            type:cc.Prefab,\n            default: null,\n        },\n        Explode: {\n            type: cc.AudioSource,\n            default: null\n        }\n    },\n\n    /*\n     * 自转函数\n     * 功能：更新对象的旋转角度，使其发生旋转\n     */\n    rotate () {\n        var newDegree = this.node.rotation + (this.rotationUpdate/Math.PI)\n        this.node.rotation = newDegree > 360 ? newDegree - 360 : newDegree\n    },\n\n\n    /*\n     * 初始化函数\n     * 功能：初始化脚本运行所需的参数\n     */\n    onLoad () {\n        // 开启碰撞检测\n        cc.director.getCollisionManager().enabled = true\n    },\n\n    \n\n    start () {\n    },\n\n    /*\n     * 碰撞函数\n     * 功能：在发生碰撞时对对象进行处理\n     */\n    onCollisionEnter (other, self) {\n        // 如果碰到了地图边界，则直接进行回弹\n        if (other.node.group === \"Map\") {\n            this.speedX *= -1\n            this.speedY *= -1\n            return\n        } else {\n            // 碰到其他对象，则直接爆炸，并设置动画\n            this.explode()\n        }\n    },\n\n    /*\n     * 爆炸函数\n     * 功能：销毁对象，并产生爆炸动画\n     */\n    explode () {\n        // 产生动画和音效\n        this.Explode.play()\n        var blast = cc.instantiate(this.BlastPrefab)\n        this.node.parent.addChild(blast)\n        blast.setPosition(this.node.x, this.node.y)\n        var animComponent = blast.getComponent(cc.Animation)\n        animComponent.play('blast3')\n\n        // 销毁本节点\n        this.node.destroy();\n    },\n\n    /*\n     * 更新位置函数\n     * 根据 X 轴和 Y 轴的分速度来更新对象的位置\n     */\n    updatePos (dt) {\n        this.node.x += this.speedX * dt\n        this.node.y += this.speedY * dt\n    },\n\n    // 系统调用的更新函数\n    update (dt) {\n        this.rotate()\n        this.updatePos(dt)\n    },\n});\n"]}