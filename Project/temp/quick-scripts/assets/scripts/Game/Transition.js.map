{"version":3,"sources":["Transition.js"],"names":["cc","Class","extends","Component","properties","continueBtn","type","Button","default","homeBtn","onLoad","node","on","loadBeginMenu","loadContinue","sceneName","director","getScene","name","score","sys","localStorage","getItem","getChildByName","getComponent","Label","string","loadScene","s","JSON","parse","Stage","temp","Number","slice","length","sceneID","isNaN","Win","newSceneName","String","_loadingScene","start"],"mappings":";;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACRC,qBAAa;AACTC,kBAAMN,GAAGO,MADA;AAETC,qBAAS;AAFA,SADL;AAKRC,iBAAS;AACLH,kBAAMN,GAAGO,MADJ;AAELC,qBAAS;AAFJ;AALD,KAHP;;AAcL;;AAEAE,UAhBK,oBAgBK;AACN,aAAKD,OAAL,CAAaE,IAAb,CAAkBC,EAAlB,CAAqB,OAArB,EAA8B,KAAKC,aAAnC,EAAkD,IAAlD;AACA,aAAKR,WAAL,CAAiBM,IAAjB,CAAsBC,EAAtB,CAAyB,OAAzB,EAAkC,KAAKE,YAAvC,EAAqD,IAArD;AACA,YAAIC,YAAYf,GAAGgB,QAAH,CAAYC,QAAZ,GAAuBC,IAAvC;AACA;AACA,YAAIH,aAAa,gBAAjB,EAAmC;AAC/B,gBAAII,QAAQnB,GAAGoB,GAAH,CAAOC,YAAP,CAAoBC,OAApB,CAA4B,cAA5B,CAAZ;AACA,iBAAKX,IAAL,CAAUY,cAAV,CAAyB,OAAzB,EAAkCC,YAAlC,CAA+CxB,GAAGyB,KAAlD,EAAyDC,MAAzD,GAAkE,mBAAmBP,KAAnB,GAA2B,GAA7F;AAEH;AACJ,KA1BI;AA4BLN,iBA5BK,2BA4BY;AACbb,WAAGgB,QAAH,CAAYW,SAAZ,CAAsB,WAAtB;AACH,KA9BI;AAgCLb,gBAhCK,0BAgCW;AACZ,YAAIc,IAAI5B,GAAGoB,GAAH,CAAOC,YAAP,CAAoBC,OAApB,CAA4B,WAA5B,CAAR;AACAM,YAAIC,KAAKC,KAAL,CAAWF,CAAX,CAAJ;AACA;AACA,YAAGA,EAAEG,KAAF,IAAW,cAAd,EAA8B;AAC1B/B,eAAGgB,QAAH,CAAYW,SAAZ,CAAsB,cAAtB;AACA;AACH;AACD,YAAIK,OAAOC,OAAOL,EAAEG,KAAF,CAAQG,KAAR,CAAcN,EAAEG,KAAF,CAAQI,MAAR,GAAiB,CAA/B,CAAP,CAAX;AACA,YAAIC,UAAUC,MAAML,IAAN,IAAcC,OAAOL,EAAEG,KAAF,CAAQH,EAAEG,KAAF,CAAQI,MAAR,GAAiB,CAAzB,CAAP,CAAd,GAAoDH,IAAlE;AACAI,kBAAUR,EAAEU,GAAF,GAAQF,UAAU,CAAlB,GAAsBA,OAAhC;AACA,YAAIG,eAAe,UAAUC,OAAOJ,OAAP,CAA7B;AACA,YAAIrB,YAAYf,GAAGgB,QAAH,CAAYyB,aAA5B;AACA,YAAI1B,aAAawB,YAAjB,EAA+B;AAC3BvC,eAAGgB,QAAH,CAAYW,SAAZ,CAAsBY,YAAtB;AACH;AACJ,KAhDI;AAkDLG,SAlDK,mBAkDI,CACR;AAnDI;;AAqDL;AArDJ","file":"Transition.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\scripts\\Game","sourcesContent":["// Learn cc.Class:\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/class.html\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/class.html\n// Learn Attribute:\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\n//  - [English] https://www.cocos2d-x.org/docs/creator/manual/en/scripting/life-cycle-callbacks.html\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        continueBtn: {\n            type: cc.Button,\n            default: null\n        },\n        homeBtn: {\n            type: cc.Button,\n            default: null\n        }\n    },\n\n    // LIFE-CYCLE CALLBACKS:\n\n    onLoad () {\n        this.homeBtn.node.on(\"click\", this.loadBeginMenu, this)\n        this.continueBtn.node.on(\"click\", this.loadContinue, this)\n        var sceneName = cc.director.getScene().name\n        debugger;\n        if (sceneName == 'Transition_INF') {\n            var score = cc.sys.localStorage.getItem('SurviveScore')\n            this.node.getChildByName('Score').getComponent(cc.Label).string = 'SurvivalTime: ' + score + 's'\n            \n        }\n    },\n\n    loadBeginMenu () {\n        cc.director.loadScene(\"beginMenu\")\n    },\n\n    loadContinue () {\n        var s = cc.sys.localStorage.getItem(\"lastStage\");\n        s = JSON.parse(s)\n        debugger\n        if(s.Stage == 'Infinity War') {\n            cc.director.loadScene('Infinity War')\n            return\n        }\n        var temp = Number(s.Stage.slice(s.Stage.length - 2))\n        var sceneID = isNaN(temp) ? Number(s.Stage[s.Stage.length - 1]) : temp\n        sceneID = s.Win ? sceneID + 1 : sceneID\n        var newSceneName = 'Stage' + String(sceneID)\n        var sceneName = cc.director._loadingScene\n        if (sceneName != newSceneName) {\n            cc.director.loadScene(newSceneName)\n        }\n    },\n\n    start () {\n    },\n\n    // update (dt) {},\n});\n"]}