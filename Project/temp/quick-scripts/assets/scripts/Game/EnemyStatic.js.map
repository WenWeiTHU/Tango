{"version":3,"sources":["EnemyStatic.js"],"names":["cc","Class","extends","require","properties","shootNum","BulletPrefab","type","Prefab","default","bulletSpeed","onLoad","director","getCollisionManager","enabled","onCollisionEnter","other","self","node","group","Explode","play","i","newBullet","instantiate","bulletSetting","getComponent","rotation","x","y","direction","v2","Math","cos","PI","sin","speed","parent","addChild","blast","BlastPrefab","setPosition","animComponent","Animation","destroy","sortAllChildren","start","update","dt","rotate"],"mappings":";;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEAA,GAAGC,KAAH,CAAS;AACLC,aAASC,QAAQ,OAAR,CADJ;;AAGLC,gBAAY;AACRC,kBAAU,CADF;AAERC,sBAAc;AACVC,kBAAMP,GAAGQ,MADC;AAEVC,qBAAS;AAFC,SAFN;AAMRC,qBAAa;AANL,KAHP;;AAYL;;AAEAC,UAdK,oBAcI;AACLX,WAAGY,QAAH,CAAYC,mBAAZ,GAAkCC,OAAlC,GAA4C,IAA5C;AACH,KAhBI;AAkBLC,oBAlBK,4BAkBYC,KAlBZ,EAkBmBC,IAlBnB,EAkByB;AAC1B,YAAID,MAAME,IAAN,CAAWC,KAAX,IAAoB,MAAxB,EAAgC;AAC5B,iBAAKC,OAAL,CAAaC,IAAb;AACA,iBAAK,IAAIC,IAAI,CAAb,EAAgBA,IAAI,GAApB,EAAyBA,KAAK,MAAM,KAAKjB,QAAzC,EAAmD;AAC/C;AACA,oBAAIkB,YAAYvB,GAAGwB,WAAH,CAAe,KAAKlB,YAApB,CAAhB;AACA,oBAAImB,gBAAgBF,UAAUG,YAAV,CAAuB,QAAvB,CAApB;;AAEAH,0BAAUI,QAAV,GAAqB,KAAKL,CAA1B;;AAEAC,0BAAUK,CAAV,GAAc,KAAKV,IAAL,CAAUU,CAAxB;AACAL,0BAAUM,CAAV,GAAc,KAAKX,IAAL,CAAUW,CAAxB;AACAJ,8BAAcK,SAAd,GAA0B9B,GAAG+B,EAAH,CAAMC,KAAKC,GAAL,CAASX,IAAIU,KAAKE,EAAT,GAAc,GAAvB,CAAN,EAAmCF,KAAKG,GAAL,CAASb,IAAIU,KAAKE,EAAT,GAAc,GAAvB,CAAnC,CAA1B;AACAT,8BAAcW,KAAd,GAAsB,KAAK1B,WAA3B;;AAEA,qBAAKQ,IAAL,CAAUmB,MAAV,CAAiBC,QAAjB,CAA0Bf,SAA1B;AACH;;AAED,gBAAIgB,QAAQvC,GAAGwB,WAAH,CAAe,KAAKgB,WAApB,CAAZ;;AAEA,iBAAKtB,IAAL,CAAUmB,MAAV,CAAiBC,QAAjB,CAA0BC,KAA1B;AACAA,kBAAME,WAAN,CAAkB,KAAKvB,IAAL,CAAUU,CAA5B,EAA+B,KAAKV,IAAL,CAAUW,CAAzC;;AAEA,gBAAIa,gBAAgBH,MAAMb,YAAN,CAAmB1B,GAAG2C,SAAtB,CAApB;AACAD,0BAAcrB,IAAd,CAAmB,QAAnB;;AAEA,iBAAKH,IAAL,CAAU0B,OAAV;AACA,iBAAK1B,IAAL,CAAUmB,MAAV,CAAiBQ,eAAjB;AACH,SA3BD,MA2BO;AACH;AACH;AACJ,KAjDI;AAmDLC,SAnDK,mBAmDG,CAAE,CAnDL;AAqDLC,UArDK,kBAqDEC,EArDF,EAqDM;AACP,aAAKC,MAAL;AACH;AAvDI,CAAT","file":"EnemyStatic.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\scripts\\Game","sourcesContent":["// Learn cc.Class:\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/class.html\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/class.html\n// Learn Attribute:\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\n//  - [English] https://www.cocos2d-x.org/docs/creator/manual/en/scripting/life-cycle-callbacks.html\n\ncc.Class({\n    extends: require(\"Enemy\"),\n\n    properties: {\n        shootNum: 8,\n        BulletPrefab: {\n            type: cc.Prefab,\n            default: null,\n        },\n        bulletSpeed: 60,\n    },\n\n    // LIFE-CYCLE CALLBACKS:\n\n    onLoad() {\n        cc.director.getCollisionManager().enabled = true;\n    },\n\n    onCollisionEnter(other, self) {\n        if (other.node.group == \"Bind\") {\n            this.Explode.play()\n            for (let i = 0; i < 360; i += 360 / this.shootNum) {\n                // 构造新子弹，并设置参数\n                let newBullet = cc.instantiate(this.BulletPrefab)\n                let bulletSetting = newBullet.getComponent(\"Bullet\")\n\n                newBullet.rotation = 90 - i\n\n                newBullet.x = this.node.x\n                newBullet.y = this.node.y\n                bulletSetting.direction = cc.v2(Math.cos(i * Math.PI / 180), Math.sin(i * Math.PI / 180))\n                bulletSetting.speed = this.bulletSpeed\n\n                this.node.parent.addChild(newBullet)\n            }\n            \n            var blast = cc.instantiate(this.BlastPrefab)\n\n            this.node.parent.addChild(blast)\n            blast.setPosition(this.node.x, this.node.y)\n\n            var animComponent = blast.getComponent(cc.Animation)\n            animComponent.play('blast3')\n\n            this.node.destroy();\n            this.node.parent.sortAllChildren()\n        } else {\n            return\n        }\n    },\n\n    start() {},\n\n    update(dt) {\n        this.rotate()\n    },\n});"]}