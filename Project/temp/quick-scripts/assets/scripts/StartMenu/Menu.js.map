{"version":3,"sources":["Menu.js"],"names":["cc","Class","extends","Component","properties","player1","type","Node","default","player2","startBtn","Button","helpBtn","bindR","bindL","enemyStatic","enemySpin","BlastPrefab1","Prefab","BlastPrefab2","enemySwing1","enemySwing2","onLoad","sys","localStorage","getItem","setItem","i","String","node","on","sceneName","director","_loadingScene","loadScene","spinDegree","bindAnimComponent","getComponent","Animation","bindAnimState","play","wrapMode","WrapMode","Loop","bindAnimComponent2","bindAnimState2","swingRight","moveBy","v2","x","easing","easeCubicActionInOut","rotate1","rotateBy","rotate2","swingLeft","runAction","repeatForever","sequence","schedule","explosion","startClick","getScene","name","blast","instantiate","addChild","setPosition","y","animComponent","blast2","animComponent2","start","update","dt","newDegree","rotation","Math","PI","sin","cos"],"mappings":"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","file":"Menu.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\scripts\\StartMenu","sourcesContent":["// Learn cc.Class:\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/class.html\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/class.html\n// Learn Attribute:\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\n//  - [English] https://www.cocos2d-x.org/docs/creator/manual/en/scripting/life-cycle-callbacks.html\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        player1: {\n            type: cc.Node,\n            default: null\n        },\n        player2: {\n            type: cc.Node,\n            default: null\n        },\n        startBtn: {\n            type: cc.Button,\n            default: null\n        },\n        helpBtn: {\n            type: cc.Button,\n            default: null\n        },\n        bindR: {\n            type: cc.Node,\n            default: null\n        },\n        bindL: {\n            type: cc.Node,\n            default: null\n        },\n        enemyStatic: {\n            type: cc.Node,\n            default: null\n        },\n        enemySpin: {\n            type: cc.Node,\n            default: null\n        },\n        BlastPrefab1: {\n            type: cc.Prefab,\n            default: null,\n        },\n        BlastPrefab2: {\n            type: cc.Prefab,\n            default: null,\n        },\n        enemySwing1: {\n            type: cc.Node,\n            default: null,\n        },\n        enemySwing2: {\n            type: cc.Node,\n            default: null,\n        },\n    },\n\n    // LIFE-CYCLE CALLBACKS:\n\n    onLoad() {\n        if(cc.sys.localStorage.getItem(\"Stage1\") === null) {\n            cc.sys.localStorage.setItem(\"Stage1\", true)\n            for(var i = 2; i < 13; ++i) {\n                cc.sys.localStorage.setItem(\"Stage\" + String(i), false)\n            }\n        }\n        this.startBtn.node.on('click', function(){\n            var sceneName = cc.director._loadingScene\n            if (sceneName != 'Selection') {\n                cc.director.loadScene('Selection')\n            }\n        }, this)\n        this.helpBtn.node.on('click', function(){\n            var sceneName = cc.director._loadingScene\n            if (sceneName != 'Help') {\n                cc.director.loadScene('Help')\n            }\n        }, this)\n        this.spinDegree = 0\n\n        var bindAnimComponent = this.bindR.getComponent(cc.Animation)\n        var bindAnimState = bindAnimComponent.play('bindAnim2')\n        bindAnimState.wrapMode = cc.WrapMode.Loop\n\n        var bindAnimComponent2 = this.bindL.getComponent(cc.Animation)\n        var bindAnimState2 = bindAnimComponent2.play('bindAnim2')\n        bindAnimState2.wrapMode = cc.WrapMode.Loop\n\n        var swingRight = cc.moveBy(2.0, cc.v2(this.enemySwing2.x - this.enemySwing1.x, 0)).easing(cc.easeCubicActionInOut());\n        var rotate1 = cc.rotateBy(1.0 , 180)\n        var rotate2 = cc.rotateBy(1.0 , -180)\n        var swingLeft = cc.moveBy(2.0, cc.v2(this.enemySwing1.x - this.enemySwing2.x, 0)).easing(cc.easeCubicActionInOut())\n        // 不断重复\n        this.enemySwing1.runAction(cc.repeatForever(cc.sequence(swingRight, rotate1, swingLeft, rotate2)))\n        this.enemySwing2.runAction(cc.repeatForever(cc.sequence(swingLeft, rotate2, swingRight, rotate1)))\n\n        this.schedule(this.explosion, 3);\n    },\n\n    startClick() {\n        var sceneName = cc.director.getScene().name\n        debugger;\n        if (sceneName != 'Selection') {\n            cc.director.loadScene('Selection')\n        }\n    },\n\n    explosion: function () {\n        let blast = cc.instantiate(this.BlastPrefab1)\n        this.node.addChild(blast)\n        blast.setPosition(this.player1.x, this.player1.y)\n        let animComponent = blast.getComponent(cc.Animation)\n        animComponent.play('blast1')\n\n        let blast2 = cc.instantiate(this.BlastPrefab2)\n        this.node.addChild(blast2)\n        blast2.setPosition(this.player2.x, this.player2.y)\n        let animComponent2 = blast2.getComponent(cc.Animation)\n        animComponent2.play('blast2')\n    },\n\n    start() {\n    },\n\n    update(dt) {\n        var newDegree = this.enemyStatic.rotation + (10 / Math.PI);\n        this.enemyStatic.rotation = newDegree > 360 ? newDegree - 360 : newDegree\n        this.enemySpin.rotation = newDegree > 360 ? newDegree - 360 : newDegree;\n\n        this.spinDegree += 0.3\n        this.spinDegree = this.spinDegree > 360 ? this.spinDegree - 360 : this.spinDegree\n        this.enemySpin.x = this.enemyStatic.x + 135 * Math.sin(this.spinDegree * Math.PI / 180)\n        this.enemySpin.y = this.enemyStatic.y + 135 * Math.cos(this.spinDegree * Math.PI / 180)\n    },\n});"]}