{"version":3,"sources":["Menu.js"],"names":["cc","Class","extends","Component","properties","player1","type","Node","default","player2","startBtn","Button","bindR","bindL","enemyStatic","enemySpin","BlastPrefab1","Prefab","BlastPrefab2","enemySwing1","enemySwing2","onLoad","sys","localStorage","getItem","setItem","i","String","node","on","startClick","spinDegree","bindAnimComponent","getComponent","Animation","bindAnimState","play","wrapMode","WrapMode","Loop","bindAnimComponent2","bindAnimState2","console","log","x","swingRight","moveBy","v2","easing","easeCubicActionInOut","rotate1","rotateBy","rotate2","swingLeft","runAction","repeatForever","sequence","schedule","explosion","director","loadScene","blast","instantiate","addChild","setPosition","y","animComponent","blast2","animComponent2","start","update","dt","newDegree","rotation","Math","PI","sin","cos"],"mappings":"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","file":"Menu.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\scripts\\StartMenu","sourcesContent":["// Learn cc.Class:\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/class.html\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/class.html\n// Learn Attribute:\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\n//  - [English] https://www.cocos2d-x.org/docs/creator/manual/en/scripting/life-cycle-callbacks.html\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        player1: {\n            type: cc.Node,\n            default: null\n        },\n        player2: {\n            type: cc.Node,\n            default: null\n        },\n        startBtn: {\n            type: cc.Button,\n            default: null\n        },\n        bindR: {\n            type: cc.Node,\n            default: null\n        },\n        bindL: {\n            type: cc.Node,\n            default: null\n        },\n        enemyStatic: {\n            type: cc.Node,\n            default: null\n        },\n        enemySpin: {\n            type: cc.Node,\n            default: null\n        },\n        BlastPrefab1: {\n            type: cc.Prefab,\n            default: null,\n        },\n        BlastPrefab2: {\n            type: cc.Prefab,\n            default: null,\n        },\n        enemySwing1: {\n            type: cc.Node,\n            default: null,\n        },\n        enemySwing2: {\n            type: cc.Node,\n            default: null,\n        },\n    },\n\n    // LIFE-CYCLE CALLBACKS:\n\n    onLoad() {\n        if(cc.sys.localStorage.getItem(\"Stage1\") === null) {\n            cc.sys.localStorage.setItem(\"Stage1\", true)\n            for(var i = 2; i < 11; ++i) {\n                cc.sys.localStorage.setItem(\"Stage\" + String(i), false)\n            }\n        }\n        this.startBtn.node.on('click', this.startClick, this)\n        this.spinDegree = 0\n\n        var bindAnimComponent = this.bindR.getComponent(cc.Animation)\n        var bindAnimState = bindAnimComponent.play('bindAnim2')\n        bindAnimState.wrapMode = cc.WrapMode.Loop\n\n        var bindAnimComponent2 = this.bindL.getComponent(cc.Animation)\n        var bindAnimState2 = bindAnimComponent2.play('bindAnim2')\n        bindAnimState2.wrapMode = cc.WrapMode.Loop\n\n        console.log(this.enemyStatic.x)\n        console.log(this.enemySwing2.x)\n        var swingRight = cc.moveBy(2.0, cc.v2(this.enemySwing2.x - this.enemySwing1.x, 0)).easing(cc.easeCubicActionInOut());\n        var rotate1 = cc.rotateBy(1.0 , 180)\n        var rotate2 = cc.rotateBy(1.0 , -180)\n        var swingLeft = cc.moveBy(2.0, cc.v2(this.enemySwing1.x - this.enemySwing2.x, 0)).easing(cc.easeCubicActionInOut())\n        // 不断重复\n        this.enemySwing1.runAction(cc.repeatForever(cc.sequence(swingRight, rotate1, swingLeft, rotate2)))\n        this.enemySwing2.runAction(cc.repeatForever(cc.sequence(swingLeft, rotate2, swingRight, rotate1)))\n\n        this.schedule(this.explosion, 3);\n    },\n\n    startClick() {\n        cc.director.loadScene(\"Selection\");\n    },\n\n    explosion: function () {\n        let blast = cc.instantiate(this.BlastPrefab1)\n        this.node.addChild(blast)\n        blast.setPosition(this.player1.x, this.player1.y)\n        let animComponent = blast.getComponent(cc.Animation)\n        animComponent.play('blast1')\n\n        let blast2 = cc.instantiate(this.BlastPrefab2)\n        this.node.addChild(blast2)\n        blast2.setPosition(this.player2.x, this.player2.y)\n        let animComponent2 = blast2.getComponent(cc.Animation)\n        animComponent2.play('blast2')\n    },\n\n    start() {\n    },\n\n    update(dt) {\n        var newDegree = this.enemyStatic.rotation + (10 / Math.PI);\n        this.enemyStatic.rotation = newDegree > 360 ? newDegree - 360 : newDegree\n        this.enemySpin.rotation = newDegree > 360 ? newDegree - 360 : newDegree;\n\n        this.spinDegree += 0.3\n        this.spinDegree = this.spinDegree > 360 ? this.spinDegree - 360 : this.spinDegree\n        this.enemySpin.x = this.enemyStatic.x + 135 * Math.sin(this.spinDegree * Math.PI / 180)\n        this.enemySpin.y = this.enemyStatic.y + 135 * Math.cos(this.spinDegree * Math.PI / 180)\n    },\n});"]}